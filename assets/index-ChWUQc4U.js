(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function e(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=e(i);fetch(i.href,o)}})();var Zr={},Te={},Ne=34,ln=10,Ce=13;function ao(t){return new Function("d","return {"+t.map(function(n,e){return JSON.stringify(n)+": d["+e+'] || ""'}).join(",")+"}")}function Ra(t,n){var e=ao(t);return function(r,i){return n(e(r),i,t)}}function Gr(t){var n=Object.create(null),e=[];return t.forEach(function(r){for(var i in r)i in n||e.push(n[i]=i)}),e}function Z(t,n){var e=t+"",r=e.length;return r<n?new Array(n-r+1).join(0)+e:e}function Fa(t){return t<0?"-"+Z(-t,6):t>9999?"+"+Z(t,6):Z(t,4)}function Ua(t){var n=t.getUTCHours(),e=t.getUTCMinutes(),r=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":Fa(t.getUTCFullYear())+"-"+Z(t.getUTCMonth()+1,2)+"-"+Z(t.getUTCDate(),2)+(i?"T"+Z(n,2)+":"+Z(e,2)+":"+Z(r,2)+"."+Z(i,3)+"Z":r?"T"+Z(n,2)+":"+Z(e,2)+":"+Z(r,2)+"Z":e||n?"T"+Z(n,2)+":"+Z(e,2)+"Z":"")}function Ia(t){var n=new RegExp('["'+t+`
\r]`),e=t.charCodeAt(0);function r(f,h){var d,p,m=i(f,function(y,w){if(d)return d(y,w-1);p=y,d=h?Ra(y,h):ao(y)});return m.columns=p||[],m}function i(f,h){var d=[],p=f.length,m=0,y=0,w,b=p<=0,x=!1;f.charCodeAt(p-1)===ln&&--p,f.charCodeAt(p-1)===Ce&&--p;function g(){if(b)return Te;if(x)return x=!1,Zr;var v,k=m,A;if(f.charCodeAt(k)===Ne){for(;m++<p&&f.charCodeAt(m)!==Ne||f.charCodeAt(++m)===Ne;);return(v=m)>=p?b=!0:(A=f.charCodeAt(m++))===ln?x=!0:A===Ce&&(x=!0,f.charCodeAt(m)===ln&&++m),f.slice(k+1,v-1).replace(/""/g,'"')}for(;m<p;){if((A=f.charCodeAt(v=m++))===ln)x=!0;else if(A===Ce)x=!0,f.charCodeAt(m)===ln&&++m;else if(A!==e)continue;return f.slice(k,v)}return b=!0,f.slice(k,p)}for(;(w=g())!==Te;){for(var _=[];w!==Zr&&w!==Te;)_.push(w),w=g();h&&(_=h(_,y++))==null||d.push(_)}return d}function o(f,h){return f.map(function(d){return h.map(function(p){return l(d[p])}).join(t)})}function a(f,h){return h==null&&(h=Gr(f)),[h.map(l).join(t)].concat(o(f,h)).join(`
`)}function s(f,h){return h==null&&(h=Gr(f)),o(f,h).join(`
`)}function c(f){return f.map(u).join(`
`)}function u(f){return f.map(l).join(t)}function l(f){return f==null?"":f instanceof Date?Ua(f):n.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:a,formatBody:s,formatRows:c,formatRow:u,formatValue:l}}var qa=Ia(","),La=qa.parse;function ja(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function Ha(t,n){return fetch(t,n).then(ja)}function Ya(t){return function(n,e,r){return arguments.length===2&&typeof e=="function"&&(r=e,e=void 0),Ha(n,e).then(function(i){return t(i,r)})}}var za=Ya(La);function Wa(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(!(t.status===204||t.status===205))return t.json()}function so(t,n){return fetch(t,n).then(Wa)}var He="http://www.w3.org/1999/xhtml";const Jr={svg:"http://www.w3.org/2000/svg",xhtml:He,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ve(t){var n=t+="",e=n.indexOf(":");return e>=0&&(n=t.slice(0,e))!=="xmlns"&&(t=t.slice(e+1)),Jr.hasOwnProperty(n)?{space:Jr[n],local:t}:t}function Ba(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===He&&n.documentElement.namespaceURI===He?n.createElement(t):n.createElementNS(e,t)}}function Va(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function mr(t){var n=ve(t);return(n.local?Va:Ba)(n)}function Xa(){}function _r(t){return t==null?Xa:function(){return this.querySelector(t)}}function Za(t){typeof t!="function"&&(t=_r(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o=n[i],a=o.length,s=r[i]=new Array(a),c,u,l=0;l<a;++l)(c=o[l])&&(u=t.call(c,c.__data__,l,o))&&("__data__"in c&&(u.__data__=c.__data__),s[l]=u);return new nt(r,this._parents)}function Ga(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Ja(){return[]}function uo(t){return t==null?Ja:function(){return this.querySelectorAll(t)}}function Qa(t){return function(){return Ga(t.apply(this,arguments))}}function Ka(t){typeof t=="function"?t=Qa(t):t=uo(t);for(var n=this._groups,e=n.length,r=[],i=[],o=0;o<e;++o)for(var a=n[o],s=a.length,c,u=0;u<s;++u)(c=a[u])&&(r.push(t.call(c,c.__data__,u,a)),i.push(c));return new nt(r,i)}function co(t){return function(){return this.matches(t)}}function lo(t){return function(n){return n.matches(t)}}var ts=Array.prototype.find;function ns(t){return function(){return ts.call(this.children,t)}}function es(){return this.firstElementChild}function rs(t){return this.select(t==null?es:ns(typeof t=="function"?t:lo(t)))}var is=Array.prototype.filter;function os(){return Array.from(this.children)}function as(t){return function(){return is.call(this.children,t)}}function ss(t){return this.selectAll(t==null?os:as(typeof t=="function"?t:lo(t)))}function us(t){typeof t!="function"&&(t=co(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o=n[i],a=o.length,s=r[i]=[],c,u=0;u<a;++u)(c=o[u])&&t.call(c,c.__data__,u,o)&&s.push(c);return new nt(r,this._parents)}function fo(t){return new Array(t.length)}function cs(){return new nt(this._enter||this._groups.map(fo),this._parents)}function Bn(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}Bn.prototype={constructor:Bn,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function ls(t){return function(){return t}}function fs(t,n,e,r,i,o){for(var a=0,s,c=n.length,u=o.length;a<u;++a)(s=n[a])?(s.__data__=o[a],r[a]=s):e[a]=new Bn(t,o[a]);for(;a<c;++a)(s=n[a])&&(i[a]=s)}function hs(t,n,e,r,i,o,a){var s,c,u=new Map,l=n.length,f=o.length,h=new Array(l),d;for(s=0;s<l;++s)(c=n[s])&&(h[s]=d=a.call(c,c.__data__,s,n)+"",u.has(d)?i[s]=c:u.set(d,c));for(s=0;s<f;++s)d=a.call(t,o[s],s,o)+"",(c=u.get(d))?(r[s]=c,c.__data__=o[s],u.delete(d)):e[s]=new Bn(t,o[s]);for(s=0;s<l;++s)(c=n[s])&&u.get(h[s])===c&&(i[s]=c)}function ds(t){return t.__data__}function ps(t,n){if(!arguments.length)return Array.from(this,ds);var e=n?hs:fs,r=this._parents,i=this._groups;typeof t!="function"&&(t=ls(t));for(var o=i.length,a=new Array(o),s=new Array(o),c=new Array(o),u=0;u<o;++u){var l=r[u],f=i[u],h=f.length,d=gs(t.call(l,l&&l.__data__,u,r)),p=d.length,m=s[u]=new Array(p),y=a[u]=new Array(p),w=c[u]=new Array(h);e(l,f,m,y,w,d,n);for(var b=0,x=0,g,_;b<p;++b)if(g=m[b]){for(b>=x&&(x=b+1);!(_=y[x])&&++x<p;);g._next=_||null}}return a=new nt(a,r),a._enter=s,a._exit=c,a}function gs(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function ys(){return new nt(this._exit||this._groups.map(fo),this._parents)}function ms(t,n,e){var r=this.enter(),i=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),n!=null&&(i=n(i),i&&(i=i.selection())),e==null?o.remove():e(o),r&&i?r.merge(i).order():i}function _s(t){for(var n=t.selection?t.selection():t,e=this._groups,r=n._groups,i=e.length,o=r.length,a=Math.min(i,o),s=new Array(i),c=0;c<a;++c)for(var u=e[c],l=r[c],f=u.length,h=s[c]=new Array(f),d,p=0;p<f;++p)(d=u[p]||l[p])&&(h[p]=d);for(;c<i;++c)s[c]=e[c];return new nt(s,this._parents)}function vs(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var r=t[n],i=r.length-1,o=r[i],a;--i>=0;)(a=r[i])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function xs(t){t||(t=ws);function n(f,h){return f&&h?t(f.__data__,h.__data__):!f-!h}for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o){for(var a=e[o],s=a.length,c=i[o]=new Array(s),u,l=0;l<s;++l)(u=a[l])&&(c[l]=u);c.sort(n)}return new nt(i,this._parents).order()}function ws(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function bs(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Ms(){return Array.from(this)}function ks(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null}function $s(){let t=0;for(const n of this)++t;return t}function Ss(){return!this.node()}function Ts(t){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i=n[e],o=0,a=i.length,s;o<a;++o)(s=i[o])&&t.call(s,s.__data__,o,i);return this}function Ns(t){return function(){this.removeAttribute(t)}}function Cs(t){return function(){this.removeAttributeNS(t.space,t.local)}}function As(t,n){return function(){this.setAttribute(t,n)}}function Es(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}function Ds(t,n){return function(){var e=n.apply(this,arguments);e==null?this.removeAttribute(t):this.setAttribute(t,e)}}function Ps(t,n){return function(){var e=n.apply(this,arguments);e==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}function Os(t,n){var e=ve(t);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((n==null?e.local?Cs:Ns:typeof n=="function"?e.local?Ps:Ds:e.local?Es:As)(e,n))}function ho(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Rs(t){return function(){this.style.removeProperty(t)}}function Fs(t,n,e){return function(){this.style.setProperty(t,n,e)}}function Us(t,n,e){return function(){var r=n.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,e)}}function Is(t,n,e){return arguments.length>1?this.each((n==null?Rs:typeof n=="function"?Us:Fs)(t,n,e??"")):Jt(this.node(),t)}function Jt(t,n){return t.style.getPropertyValue(n)||ho(t).getComputedStyle(t,null).getPropertyValue(n)}function qs(t){return function(){delete this[t]}}function Ls(t,n){return function(){this[t]=n}}function js(t,n){return function(){var e=n.apply(this,arguments);e==null?delete this[t]:this[t]=e}}function Hs(t,n){return arguments.length>1?this.each((n==null?qs:typeof n=="function"?js:Ls)(t,n)):this.node()[t]}function po(t){return t.trim().split(/^|\s+/)}function vr(t){return t.classList||new go(t)}function go(t){this._node=t,this._names=po(t.getAttribute("class")||"")}go.prototype={add:function(t){var n=this._names.indexOf(t);n<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function yo(t,n){for(var e=vr(t),r=-1,i=n.length;++r<i;)e.add(n[r])}function mo(t,n){for(var e=vr(t),r=-1,i=n.length;++r<i;)e.remove(n[r])}function Ys(t){return function(){yo(this,t)}}function zs(t){return function(){mo(this,t)}}function Ws(t,n){return function(){(n.apply(this,arguments)?yo:mo)(this,t)}}function Bs(t,n){var e=po(t+"");if(arguments.length<2){for(var r=vr(this.node()),i=-1,o=e.length;++i<o;)if(!r.contains(e[i]))return!1;return!0}return this.each((typeof n=="function"?Ws:n?Ys:zs)(e,n))}function Vs(){this.textContent=""}function Xs(t){return function(){this.textContent=t}}function Zs(t){return function(){var n=t.apply(this,arguments);this.textContent=n??""}}function Gs(t){return arguments.length?this.each(t==null?Vs:(typeof t=="function"?Zs:Xs)(t)):this.node().textContent}function Js(){this.innerHTML=""}function Qs(t){return function(){this.innerHTML=t}}function Ks(t){return function(){var n=t.apply(this,arguments);this.innerHTML=n??""}}function tu(t){return arguments.length?this.each(t==null?Js:(typeof t=="function"?Ks:Qs)(t)):this.node().innerHTML}function nu(){this.nextSibling&&this.parentNode.appendChild(this)}function eu(){return this.each(nu)}function ru(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function iu(){return this.each(ru)}function ou(t){var n=typeof t=="function"?t:mr(t);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function au(){return null}function su(t,n){var e=typeof t=="function"?t:mr(t),r=n==null?au:typeof n=="function"?n:_r(n);return this.select(function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)})}function uu(){var t=this.parentNode;t&&t.removeChild(this)}function cu(){return this.each(uu)}function lu(){var t=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function fu(){var t=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function hu(t){return this.select(t?fu:lu)}function du(t){return arguments.length?this.property("__data__",t):this.node().__data__}function pu(t){return function(n){t.call(this,n,this.__data__)}}function gu(t){return t.trim().split(/^|\s+/).map(function(n){var e="",r=n.indexOf(".");return r>=0&&(e=n.slice(r+1),n=n.slice(0,r)),{type:n,name:e}})}function yu(t){return function(){var n=this.__on;if(n){for(var e=0,r=-1,i=n.length,o;e<i;++e)o=n[e],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):n[++r]=o;++r?n.length=r:delete this.__on}}}function mu(t,n,e){return function(){var r=this.__on,i,o=pu(n);if(r){for(var a=0,s=r.length;a<s;++a)if((i=r[a]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=e),i.value=n;return}}this.addEventListener(t.type,o,e),i={type:t.type,name:t.name,value:n,listener:o,options:e},r?r.push(i):this.__on=[i]}}function _u(t,n,e){var r=gu(t+""),i,o=r.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var c=0,u=s.length,l;c<u;++c)for(i=0,l=s[c];i<o;++i)if((a=r[i]).type===l.type&&a.name===l.name)return l.value}return}for(s=n?mu:yu,i=0;i<o;++i)this.each(s(r[i],n,e));return this}function _o(t,n,e){var r=ho(t),i=r.CustomEvent;typeof i=="function"?i=new i(n,e):(i=r.document.createEvent("Event"),e?(i.initEvent(n,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(n,!1,!1)),t.dispatchEvent(i)}function vu(t,n){return function(){return _o(this,t,n)}}function xu(t,n){return function(){return _o(this,t,n.apply(this,arguments))}}function wu(t,n){return this.each((typeof n=="function"?xu:vu)(t,n))}function*bu(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,o=r.length,a;i<o;++i)(a=r[i])&&(yield a)}var vo=[null];function nt(t,n){this._groups=t,this._parents=n}function Tn(){return new nt([[document.documentElement]],vo)}function Mu(){return this}nt.prototype=Tn.prototype={constructor:nt,select:Za,selectAll:Ka,selectChild:rs,selectChildren:ss,filter:us,data:ps,enter:cs,exit:ys,join:ms,merge:_s,selection:Mu,order:vs,sort:xs,call:bs,nodes:Ms,node:ks,size:$s,empty:Ss,each:Ts,attr:Os,style:Is,property:Hs,classed:Bs,text:Gs,html:tu,raise:eu,lower:iu,append:ou,insert:su,remove:cu,clone:hu,datum:du,on:_u,dispatch:wu,[Symbol.iterator]:bu};function G(t){return typeof t=="string"?new nt([[document.querySelector(t)]],[document.documentElement]):new nt([[t]],vo)}function ku(t){return G(mr(t).call(document.documentElement))}function Ln(t,n){return t==null||n==null?NaN:t<n?-1:t>n?1:t>=n?0:NaN}function $u(t,n){return t==null||n==null?NaN:n<t?-1:n>t?1:n>=t?0:NaN}function xr(t){let n,e,r;t.length!==2?(n=Ln,e=(s,c)=>Ln(t(s),c),r=(s,c)=>t(s)-c):(n=t===Ln||t===$u?t:Su,e=t,r=t);function i(s,c,u=0,l=s.length){if(u<l){if(n(c,c)!==0)return l;do{const f=u+l>>>1;e(s[f],c)<0?u=f+1:l=f}while(u<l)}return u}function o(s,c,u=0,l=s.length){if(u<l){if(n(c,c)!==0)return l;do{const f=u+l>>>1;e(s[f],c)<=0?u=f+1:l=f}while(u<l)}return u}function a(s,c,u=0,l=s.length){const f=i(s,c,u,l-1);return f>u&&r(s[f-1],c)>-r(s[f],c)?f-1:f}return{left:i,center:a,right:o}}function Su(){return 0}function Tu(t){return t===null?NaN:+t}const Nu=xr(Ln),xo=Nu.right;xr(Tu).center;class Qt{constructor(){this._partials=new Float64Array(32),this._n=0}add(n){const e=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const o=e[i],a=n+o,s=Math.abs(n)<Math.abs(o)?n-(a-o):o-(a-n);s&&(e[r++]=s),n=a}return e[r]=n,this._n=r+1,this}valueOf(){const n=this._partials;let e=this._n,r,i,o,a=0;if(e>0){for(a=n[--e];e>0&&(r=a,i=n[--e],a=r+i,o=i-(a-r),!o););e>0&&(o<0&&n[e-1]<0||o>0&&n[e-1]>0)&&(i=o*2,r=a+i,i==r-a&&(a=r))}return a}}class Cu extends Map{constructor(n,e=Du){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),n!=null)for(const[r,i]of n)this.set(r,i)}get(n){return super.get(Qr(this,n))}has(n){return super.has(Qr(this,n))}set(n,e){return super.set(Au(this,n),e)}delete(n){return super.delete(Eu(this,n))}}function Qr({_intern:t,_key:n},e){const r=n(e);return t.has(r)?t.get(r):e}function Au({_intern:t,_key:n},e){const r=n(e);return t.has(r)?t.get(r):(t.set(r,e),e)}function Eu({_intern:t,_key:n},e){const r=n(e);return t.has(r)&&(e=t.get(r),t.delete(r)),e}function Du(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Kr(t){return t}function Pu(t,...n){return Ou(t,Kr,Kr,n)}function Ou(t,n,e,r){return function i(o,a){if(a>=r.length)return e(o);const s=new Cu,c=r[a++];let u=-1;for(const l of o){const f=c(l,++u,o),h=s.get(f);h?h.push(l):s.set(f,[l])}for(const[l,f]of s)s.set(l,i(f,a));return n(s)}(t,0)}const Ru=Math.sqrt(50),Fu=Math.sqrt(10),Uu=Math.sqrt(2);function Vn(t,n,e){const r=(n-t)/Math.max(0,e),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=Ru?10:o>=Fu?5:o>=Uu?2:1;let s,c,u;return i<0?(u=Math.pow(10,-i)/a,s=Math.round(t*u),c=Math.round(n*u),s/u<t&&++s,c/u>n&&--c,u=-u):(u=Math.pow(10,i)*a,s=Math.round(t/u),c=Math.round(n/u),s*u<t&&++s,c*u>n&&--c),c<s&&.5<=e&&e<2?Vn(t,n,e*2):[s,c,u]}function Iu(t,n,e){if(n=+n,t=+t,e=+e,!(e>0))return[];if(t===n)return[t];const r=n<t,[i,o,a]=r?Vn(n,t,e):Vn(t,n,e);if(!(o>=i))return[];const s=o-i+1,c=new Array(s);if(r)if(a<0)for(let u=0;u<s;++u)c[u]=(o-u)/-a;else for(let u=0;u<s;++u)c[u]=(o-u)*a;else if(a<0)for(let u=0;u<s;++u)c[u]=(i+u)/-a;else for(let u=0;u<s;++u)c[u]=(i+u)*a;return c}function Ye(t,n,e){return n=+n,t=+t,e=+e,Vn(t,n,e)[2]}function ze(t,n,e){n=+n,t=+t,e=+e;const r=n<t,i=r?Ye(n,t,e):Ye(t,n,e);return(r?-1:1)*(i<0?1/-i:i)}function qu(t,n){let e;if(n===void 0)for(const r of t)r!=null&&(e<r||e===void 0&&r>=r)&&(e=r);else{let r=-1;for(let i of t)(i=n(i,++r,t))!=null&&(e<i||e===void 0&&i>=i)&&(e=i)}return e}function Lu(t,n){let e;if(n===void 0)for(const r of t)r!=null&&(e>r||e===void 0&&r>=r)&&(e=r);else{let r=-1;for(let i of t)(i=n(i,++r,t))!=null&&(e>i||e===void 0&&i>=i)&&(e=i)}return e}function*ju(t){for(const n of t)yield*n}function Hu(t){return Array.from(ju(t))}var Bt=1e-6,wr=Math.PI,Yu=wr*2,zu=180/wr,Wu=wr/180,Vt=Math.abs,Bu=Math.cos,Vu=Math.sin,br=Math.sqrt;function st(){}function Xn(t,n){t&&ni.hasOwnProperty(t.type)&&ni[t.type](t,n)}var ti={Feature:function(t,n){Xn(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,i=e.length;++r<i;)Xn(e[r].geometry,n)}},ni={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)t=e[r],n.point(t[0],t[1],t[2])},LineString:function(t,n){We(t.coordinates,n,0)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)We(e[r],n,0)},Polygon:function(t,n){ei(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)ei(e[r],n)},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,i=e.length;++r<i;)Xn(e[r],n)}};function We(t,n,e){var r=-1,i=t.length-e,o;for(n.lineStart();++r<i;)o=t[r],n.point(o[0],o[1],o[2]);n.lineEnd()}function ei(t,n){var e=-1,r=t.length;for(n.polygonStart();++e<r;)We(t[e],n,1);n.polygonEnd()}function Yt(t,n){t&&ti.hasOwnProperty(t.type)?ti[t.type](t,n):Xn(t,n)}function Xu(){var t=[],n;return{point:function(e,r,i){n.push([e,r,i])},lineStart:function(){t.push(n=[])},lineEnd:st,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var e=t;return t=[],n=null,e}}}function Zu(t,n){return Vt(t[0]-n[0])<Bt&&Vt(t[1]-n[1])<Bt}function An(t,n,e,r){this.x=t,this.z=n,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function Gu(t,n,e,r,i){var o=[],a=[],s,c;if(t.forEach(function(p){if(!((m=p.length-1)<=0)){var m,y=p[0],w=p[m],b;if(Zu(y,w)){if(!y[2]&&!w[2]){for(i.lineStart(),s=0;s<m;++s)i.point((y=p[s])[0],y[1]);i.lineEnd();return}w[0]+=2*Bt}o.push(b=new An(y,p,null,!0)),a.push(b.o=new An(y,null,b,!1)),o.push(b=new An(w,p,null,!1)),a.push(b.o=new An(w,null,b,!0))}}),!!o.length){for(a.sort(n),ri(o),ri(a),s=0,c=a.length;s<c;++s)a[s].e=e=!e;for(var u=o[0],l,f;;){for(var h=u,d=!0;h.v;)if((h=h.n)===u)return;l=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(s=0,c=l.length;s<c;++s)i.point((f=l[s])[0],f[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(d)for(l=h.p.z,s=l.length-1;s>=0;--s)i.point((f=l[s])[0],f[1]);else r(h.x,h.p.x,-1,i);h=h.p}h=h.o,l=h.z,d=!d}while(!h.v);i.lineEnd()}}}function ri(t){if(n=t.length){for(var n,e=0,r=t[0],i;++e<n;)r.n=i=t[e],i.p=r,r=i;r.n=i=t[0],i.p=r}}function Ju(t,n,e,r,i,o){var a=t[0],s=t[1],c=n[0],u=n[1],l=0,f=1,h=c-a,d=u-s,p;if(p=e-a,!(!h&&p>0)){if(p/=h,h<0){if(p<l)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>l&&(l=p)}if(p=i-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>l&&(l=p)}else if(h>0){if(p<l)return;p<f&&(f=p)}if(p=r-s,!(!d&&p>0)){if(p/=d,d<0){if(p<l)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>l&&(l=p)}if(p=o-s,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>l&&(l=p)}else if(d>0){if(p<l)return;p<f&&(f=p)}return l>0&&(t[0]=a+l*h,t[1]=s+l*d),f<1&&(n[0]=a+f*h,n[1]=s+f*d),!0}}}}}var En=1e9,Dn=-1e9;function Qu(t,n,e,r){function i(u,l){return t<=u&&u<=e&&n<=l&&l<=r}function o(u,l,f,h){var d=0,p=0;if(u==null||(d=a(u,f))!==(p=a(l,f))||c(u,l)<0^f>0)do h.point(d===0||d===3?t:e,d>1?r:n);while((d=(d+f+4)%4)!==p);else h.point(l[0],l[1])}function a(u,l){return Vt(u[0]-t)<Bt?l>0?0:3:Vt(u[0]-e)<Bt?l>0?2:1:Vt(u[1]-n)<Bt?l>0?1:0:l>0?3:2}function s(u,l){return c(u.x,l.x)}function c(u,l){var f=a(u,1),h=a(l,1);return f!==h?f-h:f===0?l[1]-u[1]:f===1?u[0]-l[0]:f===2?u[1]-l[1]:l[0]-u[0]}return function(u){var l=u,f=Xu(),h,d,p,m,y,w,b,x,g,_,v,k={point:A,lineStart:$,lineEnd:N,polygonStart:E,polygonEnd:T};function A(O,R){i(O,R)&&l.point(O,R)}function C(){for(var O=0,R=0,q=d.length;R<q;++R)for(var Y=d[R],H=1,Ct=Y.length,et=Y[0],ft,rt,V=et[0],it=et[1];H<Ct;++H)ft=V,rt=it,et=Y[H],V=et[0],it=et[1],rt<=r?it>r&&(V-ft)*(r-rt)>(it-rt)*(t-ft)&&++O:it<=r&&(V-ft)*(r-rt)<(it-rt)*(t-ft)&&--O;return O}function E(){l=f,h=[],d=[],v=!0}function T(){var O=C(),R=v&&O,q=(h=Hu(h)).length;(R||q)&&(u.polygonStart(),R&&(u.lineStart(),o(null,null,1,u),u.lineEnd()),q&&Gu(h,s,O,o,u),u.polygonEnd()),l=u,h=d=p=null}function $(){k.point=I,d&&d.push(p=[]),_=!0,g=!1,b=x=NaN}function N(){h&&(I(m,y),w&&g&&f.rejoin(),h.push(f.result())),k.point=A,g&&l.lineEnd()}function I(O,R){var q=i(O,R);if(d&&p.push([O,R]),_)m=O,y=R,w=q,_=!1,q&&(l.lineStart(),l.point(O,R));else if(q&&g)l.point(O,R);else{var Y=[b=Math.max(Dn,Math.min(En,b)),x=Math.max(Dn,Math.min(En,x))],H=[O=Math.max(Dn,Math.min(En,O)),R=Math.max(Dn,Math.min(En,R))];Ju(Y,H,t,n,e,r)?(g||(l.lineStart(),l.point(Y[0],Y[1])),l.point(H[0],H[1]),q||l.lineEnd(),v=!1):q&&(l.lineStart(),l.point(O,R),v=!1)}b=O,x=R,g=q}return k}}const Be=t=>t;var Ae=new Qt,Ve=new Qt,wo,bo,Xe,Ze,kt={point:st,lineStart:st,lineEnd:st,polygonStart:function(){kt.lineStart=Ku,kt.lineEnd=nc},polygonEnd:function(){kt.lineStart=kt.lineEnd=kt.point=st,Ae.add(Vt(Ve)),Ve=new Qt},result:function(){var t=Ae/2;return Ae=new Qt,t}};function Ku(){kt.point=tc}function tc(t,n){kt.point=Mo,wo=Xe=t,bo=Ze=n}function Mo(t,n){Ve.add(Ze*t-Xe*n),Xe=t,Ze=n}function nc(){Mo(wo,bo)}var Kt=1/0,Zn=Kt,bn=-Kt,Gn=bn,Jn={point:ec,lineStart:st,lineEnd:st,polygonStart:st,polygonEnd:st,result:function(){var t=[[Kt,Zn],[bn,Gn]];return bn=Gn=-(Zn=Kt=1/0),t}};function ec(t,n){t<Kt&&(Kt=t),t>bn&&(bn=t),n<Zn&&(Zn=n),n>Gn&&(Gn=n)}var Ge=0,Je=0,gn=0,Qn=0,Kn=0,zt=0,Qe=0,Ke=0,yn=0,ko,$o,gt,yt,at={point:Ft,lineStart:ii,lineEnd:oi,polygonStart:function(){at.lineStart=oc,at.lineEnd=ac},polygonEnd:function(){at.point=Ft,at.lineStart=ii,at.lineEnd=oi},result:function(){var t=yn?[Qe/yn,Ke/yn]:zt?[Qn/zt,Kn/zt]:gn?[Ge/gn,Je/gn]:[NaN,NaN];return Ge=Je=gn=Qn=Kn=zt=Qe=Ke=yn=0,t}};function Ft(t,n){Ge+=t,Je+=n,++gn}function ii(){at.point=rc}function rc(t,n){at.point=ic,Ft(gt=t,yt=n)}function ic(t,n){var e=t-gt,r=n-yt,i=br(e*e+r*r);Qn+=i*(gt+t)/2,Kn+=i*(yt+n)/2,zt+=i,Ft(gt=t,yt=n)}function oi(){at.point=Ft}function oc(){at.point=sc}function ac(){So(ko,$o)}function sc(t,n){at.point=So,Ft(ko=gt=t,$o=yt=n)}function So(t,n){var e=t-gt,r=n-yt,i=br(e*e+r*r);Qn+=i*(gt+t)/2,Kn+=i*(yt+n)/2,zt+=i,i=yt*t-gt*n,Qe+=i*(gt+t),Ke+=i*(yt+n),yn+=i*3,Ft(gt=t,yt=n)}function To(t){this._context=t}To.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,n){switch(this._point){case 0:{this._context.moveTo(t,n),this._point=1;break}case 1:{this._context.lineTo(t,n);break}default:{this._context.moveTo(t+this._radius,n),this._context.arc(t,n,this._radius,0,Yu);break}}},result:st};var tr=new Qt,Ee,No,Co,mn,_n,Mn={point:st,lineStart:function(){Mn.point=uc},lineEnd:function(){Ee&&Ao(No,Co),Mn.point=st},polygonStart:function(){Ee=!0},polygonEnd:function(){Ee=null},result:function(){var t=+tr;return tr=new Qt,t}};function uc(t,n){Mn.point=Ao,No=mn=t,Co=_n=n}function Ao(t,n){mn-=t,_n-=n,tr.add(br(mn*mn+_n*_n)),mn=t,_n=n}let ai,te,si,ui;class ci{constructor(n){this._append=n==null?Eo:cc(n),this._radius=4.5,this._=""}pointRadius(n){return this._radius=+n,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(n,e){switch(this._point){case 0:{this._append`M${n},${e}`,this._point=1;break}case 1:{this._append`L${n},${e}`;break}default:{if(this._append`M${n},${e}`,this._radius!==si||this._append!==te){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,si=r,te=this._append,ui=this._,this._=i}this._+=ui;break}}}result(){const n=this._;return this._="",n.length?n:null}}function Eo(t){let n=1;this._+=t[0];for(const e=t.length;n<e;++n)this._+=arguments[n]+t[n]}function cc(t){const n=Math.floor(t);if(!(n>=0))throw new RangeError(`invalid digits: ${t}`);if(n>15)return Eo;if(n!==ai){const e=10**n;ai=n,te=function(i){let o=1;this._+=i[0];for(const a=i.length;o<a;++o)this._+=Math.round(arguments[o]*e)/e+i[o]}}return te}function lc(t,n){let e=3,r=4.5,i,o;function a(s){return s&&(typeof r=="function"&&o.pointRadius(+r.apply(this,arguments)),Yt(s,i(o))),o.result()}return a.area=function(s){return Yt(s,i(kt)),kt.result()},a.measure=function(s){return Yt(s,i(Mn)),Mn.result()},a.bounds=function(s){return Yt(s,i(Jn)),Jn.result()},a.centroid=function(s){return Yt(s,i(at)),at.result()},a.projection=function(s){return arguments.length?(i=s==null?(t=null,Be):(t=s).stream,a):t},a.context=function(s){return arguments.length?(o=s==null?(n=null,new ci(e)):new To(n=s),typeof r!="function"&&o.pointRadius(r),a):n},a.pointRadius=function(s){return arguments.length?(r=typeof s=="function"?s:(o.pointRadius(+s),+s),a):r},a.digits=function(s){if(!arguments.length)return e;if(s==null)e=null;else{const c=Math.floor(s);if(!(c>=0))throw new RangeError(`invalid digits: ${s}`);e=c}return n===null&&(o=new ci(e)),a},a.projection(t).digits(e).context(n)}function fc(t){return function(n){var e=new nr;for(var r in t)e[r]=t[r];return e.stream=n,e}}function nr(){}nr.prototype={constructor:nr,point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Mr(t,n,e){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),r!=null&&t.clipExtent(null),Yt(e,t.stream(Jn)),n(Jn.result()),r!=null&&t.clipExtent(r),t}function Do(t,n,e){return Mr(t,function(r){var i=n[1][0]-n[0][0],o=n[1][1]-n[0][1],a=Math.min(i/(r[1][0]-r[0][0]),o/(r[1][1]-r[0][1])),s=+n[0][0]+(i-a*(r[1][0]+r[0][0]))/2,c=+n[0][1]+(o-a*(r[1][1]+r[0][1]))/2;t.scale(150*a).translate([s,c])},e)}function hc(t,n,e){return Do(t,[[0,0],n],e)}function dc(t,n,e){return Mr(t,function(r){var i=+n,o=i/(r[1][0]-r[0][0]),a=(i-o*(r[1][0]+r[0][0]))/2,s=-o*r[0][1];t.scale(150*o).translate([a,s])},e)}function pc(t,n,e){return Mr(t,function(r){var i=+n,o=i/(r[1][1]-r[0][1]),a=-o*r[0][0],s=(i-o*(r[1][1]+r[0][1]))/2;t.scale(150*o).translate([a,s])},e)}function gc(){var t=1,n=0,e=0,r=1,i=1,o=0,a,s,c=null,u,l,f,h=1,d=1,p=fc({point:function(g,_){var v=x([g,_]);this.stream.point(v[0],v[1])}}),m=Be,y,w;function b(){return h=t*r,d=t*i,y=w=null,x}function x(g){var _=g[0]*h,v=g[1]*d;if(o){var k=v*a-_*s;_=_*a+v*s,v=k}return[_+n,v+e]}return x.invert=function(g){var _=g[0]-n,v=g[1]-e;if(o){var k=v*a+_*s;_=_*a-v*s,v=k}return[_/h,v/d]},x.stream=function(g){return y&&w===g?y:y=p(m(w=g))},x.postclip=function(g){return arguments.length?(m=g,c=u=l=f=null,b()):m},x.clipExtent=function(g){return arguments.length?(m=g==null?(c=u=l=f=null,Be):Qu(c=+g[0][0],u=+g[0][1],l=+g[1][0],f=+g[1][1]),b()):c==null?null:[[c,u],[l,f]]},x.scale=function(g){return arguments.length?(t=+g,b()):t},x.translate=function(g){return arguments.length?(n=+g[0],e=+g[1],b()):[n,e]},x.angle=function(g){return arguments.length?(o=g%360*Wu,s=Vu(o),a=Bu(o),b()):o*zu},x.reflectX=function(g){return arguments.length?(r=g?-1:1,b()):r<0},x.reflectY=function(g){return arguments.length?(i=g?-1:1,b()):i<0},x.fitExtent=function(g,_){return Do(x,g,_)},x.fitSize=function(g,_){return hc(x,g,_)},x.fitWidth=function(g,_){return dc(x,g,_)},x.fitHeight=function(g,_){return pc(x,g,_)},x}function yc(t){return t}function mc(t){if(t==null)return yc;var n,e,r=t.scale[0],i=t.scale[1],o=t.translate[0],a=t.translate[1];return function(s,c){c||(n=e=0);var u=2,l=s.length,f=new Array(l);for(f[0]=(n+=s[0])*r+o,f[1]=(e+=s[1])*i+a;u<l;)f[u]=s[u],++u;return f}}function _c(t,n){for(var e,r=t.length,i=r-n;i<--r;)e=t[i],t[i++]=t[r],t[r]=e}function li(t,n){return typeof n=="string"&&(n=t.objects[n]),n.type==="GeometryCollection"?{type:"FeatureCollection",features:n.geometries.map(function(e){return fi(t,e)})}:fi(t,n)}function fi(t,n){var e=n.id,r=n.bbox,i=n.properties==null?{}:n.properties,o=vc(t,n);return e==null&&r==null?{type:"Feature",properties:i,geometry:o}:r==null?{type:"Feature",id:e,properties:i,geometry:o}:{type:"Feature",id:e,bbox:r,properties:i,geometry:o}}function vc(t,n){var e=mc(t.transform),r=t.arcs;function i(l,f){f.length&&f.pop();for(var h=r[l<0?~l:l],d=0,p=h.length;d<p;++d)f.push(e(h[d],d));l<0&&_c(f,p)}function o(l){return e(l)}function a(l){for(var f=[],h=0,d=l.length;h<d;++h)i(l[h],f);return f.length<2&&f.push(f[0]),f}function s(l){for(var f=a(l);f.length<4;)f.push(f[0]);return f}function c(l){return l.map(s)}function u(l){var f=l.type,h;switch(f){case"GeometryCollection":return{type:f,geometries:l.geometries.map(u)};case"Point":h=o(l.coordinates);break;case"MultiPoint":h=l.coordinates.map(o);break;case"LineString":h=a(l.arcs);break;case"MultiLineString":h=l.arcs.map(a);break;case"Polygon":h=c(l.arcs);break;case"MultiPolygon":h=l.arcs.map(c);break;default:return null}return{type:f,coordinates:h}}return u(n)}const j={map:{width:1200,height:1200,margin:{top:10,right:30,bottom:10,left:80},maxRadius:1e3,magnitudeThreshold:5.5,historicalMagnitudeThreshold:8,depthSegmentation:[{depth:70,color:"#FF9457"},{depth:300,color:"#CD4A00"},{depth:700,color:"#8F451B"}]},regions:{Costa:["Lima","Callao","Moquegua","Tacna","Lambayeque","La Libertad","Ica","Piura","Tumbes","Ancash","Arequipa"],Sierra:["Cajamarca","San Martin","Huanuco","Pasco","Junin","Ayacucho","Huancavelica","Apurimac","Cusco","Puno"],Selva:["Amazonas","Loreto","Madre De Dios","Ucayali"]},legend:{circle:{magnitudes:[9,8,7,6,5],domain:[0,9],range:[0,190]},barHeight:40,padding:15},timeline:{rowSize:40,firstRowOffset:0,leftPositionGridLine:100,fontSizes:{labels:"12px",title:"15px",text:"14px",axis:"11px",header:"13px"},margins:{top:30,right:30,bottom:30,left:30}}},ne={width:j.map.width-j.map.margin.left-j.map.margin.right,height:j.map.height-j.map.margin.top-j.map.margin.bottom},xc=[{note:{label:"70,000 muertos, 880,000 víctimas y 160,000 casas destruidas solo en Callejón de Huaylas.",title:"Más Letal",wrap:250,padding:20},color:["#2E5751"],x:235,y:ne.height-280,dy:10,dx:60},{note:{label:"82 km de Ocoña: 65 muertos, 220,000 bajas y 24,500 casas destruidas.",title:"Mas Poderoso",wrap:250,padding:20},color:["#2E5751"],x:713,y:ne.height+320,dy:10,dx:60}],wc=[{note:{label:"8.4M Atico, Arequipa (2001)",title:"Mas Poderoso desde 1960",wrap:250,padding:10},color:["#2E5751"],x:1110,y:35,dy:250,dx:-2},{note:{label:"9.4M Ite, Tacna (1604)",title:"Mas Poderoso en la Historia",wrap:250,padding:20},color:["#2E5751"],x:510,y:178,dy:20,dx:-10}];var er="http://www.w3.org/1999/xhtml";const hi={svg:"http://www.w3.org/2000/svg",xhtml:er,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Po(t){var n=t+="",e=n.indexOf(":");return e>=0&&(n=t.slice(0,e))!=="xmlns"&&(t=t.slice(e+1)),hi.hasOwnProperty(n)?{space:hi[n],local:t}:t}function bc(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===er&&n.documentElement.namespaceURI===er?n.createElement(t):n.createElementNS(e,t)}}function Mc(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Oo(t){var n=Po(t);return(n.local?Mc:bc)(n)}function kc(){}function Ro(t){return t==null?kc:function(){return this.querySelector(t)}}function $c(t){typeof t!="function"&&(t=Ro(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o=n[i],a=o.length,s=r[i]=new Array(a),c,u,l=0;l<a;++l)(c=o[l])&&(u=t.call(c,c.__data__,l,o))&&("__data__"in c&&(u.__data__=c.__data__),s[l]=u);return new lt(r,this._parents)}function Sc(){return[]}function Tc(t){return t==null?Sc:function(){return this.querySelectorAll(t)}}function Nc(t){typeof t!="function"&&(t=Tc(t));for(var n=this._groups,e=n.length,r=[],i=[],o=0;o<e;++o)for(var a=n[o],s=a.length,c,u=0;u<s;++u)(c=a[u])&&(r.push(t.call(c,c.__data__,u,a)),i.push(c));return new lt(r,i)}function Cc(t){return function(){return this.matches(t)}}function Ac(t){typeof t!="function"&&(t=Cc(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o=n[i],a=o.length,s=r[i]=[],c,u=0;u<a;++u)(c=o[u])&&t.call(c,c.__data__,u,o)&&s.push(c);return new lt(r,this._parents)}function Fo(t){return new Array(t.length)}function Ec(){return new lt(this._enter||this._groups.map(Fo),this._parents)}function ee(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}ee.prototype={constructor:ee,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Dc(t){return function(){return t}}var di="$";function Pc(t,n,e,r,i,o){for(var a=0,s,c=n.length,u=o.length;a<u;++a)(s=n[a])?(s.__data__=o[a],r[a]=s):e[a]=new ee(t,o[a]);for(;a<c;++a)(s=n[a])&&(i[a]=s)}function Oc(t,n,e,r,i,o,a){var s,c,u={},l=n.length,f=o.length,h=new Array(l),d;for(s=0;s<l;++s)(c=n[s])&&(h[s]=d=di+a.call(c,c.__data__,s,n),d in u?i[s]=c:u[d]=c);for(s=0;s<f;++s)d=di+a.call(t,o[s],s,o),(c=u[d])?(r[s]=c,c.__data__=o[s],u[d]=null):e[s]=new ee(t,o[s]);for(s=0;s<l;++s)(c=n[s])&&u[h[s]]===c&&(i[s]=c)}function Rc(t,n){if(!t)return d=new Array(this.size()),u=-1,this.each(function(v){d[++u]=v}),d;var e=n?Oc:Pc,r=this._parents,i=this._groups;typeof t!="function"&&(t=Dc(t));for(var o=i.length,a=new Array(o),s=new Array(o),c=new Array(o),u=0;u<o;++u){var l=r[u],f=i[u],h=f.length,d=t.call(l,l&&l.__data__,u,r),p=d.length,m=s[u]=new Array(p),y=a[u]=new Array(p),w=c[u]=new Array(h);e(l,f,m,y,w,d,n);for(var b=0,x=0,g,_;b<p;++b)if(g=m[b]){for(b>=x&&(x=b+1);!(_=y[x])&&++x<p;);g._next=_||null}}return a=new lt(a,r),a._enter=s,a._exit=c,a}function Fc(){return new lt(this._exit||this._groups.map(Fo),this._parents)}function Uc(t,n,e){var r=this.enter(),i=this,o=this.exit();return r=typeof t=="function"?t(r):r.append(t+""),n!=null&&(i=n(i)),e==null?o.remove():e(o),r&&i?r.merge(i).order():i}function Ic(t){for(var n=this._groups,e=t._groups,r=n.length,i=e.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var c=n[s],u=e[s],l=c.length,f=a[s]=new Array(l),h,d=0;d<l;++d)(h=c[d]||u[d])&&(f[d]=h);for(;s<r;++s)a[s]=n[s];return new lt(a,this._parents)}function qc(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var r=t[n],i=r.length-1,o=r[i],a;--i>=0;)(a=r[i])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function Lc(t){t||(t=jc);function n(f,h){return f&&h?t(f.__data__,h.__data__):!f-!h}for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o){for(var a=e[o],s=a.length,c=i[o]=new Array(s),u,l=0;l<s;++l)(u=a[l])&&(c[l]=u);c.sort(n)}return new lt(i,this._parents).order()}function jc(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function Hc(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Yc(){var t=new Array(this.size()),n=-1;return this.each(function(){t[++n]=this}),t}function zc(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null}function Wc(){var t=0;return this.each(function(){++t}),t}function Bc(){return!this.node()}function Vc(t){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i=n[e],o=0,a=i.length,s;o<a;++o)(s=i[o])&&t.call(s,s.__data__,o,i);return this}function Xc(t){return function(){this.removeAttribute(t)}}function Zc(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Gc(t,n){return function(){this.setAttribute(t,n)}}function Jc(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}function Qc(t,n){return function(){var e=n.apply(this,arguments);e==null?this.removeAttribute(t):this.setAttribute(t,e)}}function Kc(t,n){return function(){var e=n.apply(this,arguments);e==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}function tl(t,n){var e=Po(t);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((n==null?e.local?Zc:Xc:typeof n=="function"?e.local?Kc:Qc:e.local?Jc:Gc)(e,n))}function Uo(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function nl(t){return function(){this.style.removeProperty(t)}}function el(t,n,e){return function(){this.style.setProperty(t,n,e)}}function rl(t,n,e){return function(){var r=n.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,e)}}function il(t,n,e){return arguments.length>1?this.each((n==null?nl:typeof n=="function"?rl:el)(t,n,e??"")):ol(this.node(),t)}function ol(t,n){return t.style.getPropertyValue(n)||Uo(t).getComputedStyle(t,null).getPropertyValue(n)}function al(t){return function(){delete this[t]}}function sl(t,n){return function(){this[t]=n}}function ul(t,n){return function(){var e=n.apply(this,arguments);e==null?delete this[t]:this[t]=e}}function cl(t,n){return arguments.length>1?this.each((n==null?al:typeof n=="function"?ul:sl)(t,n)):this.node()[t]}function Io(t){return t.trim().split(/^|\s+/)}function kr(t){return t.classList||new qo(t)}function qo(t){this._node=t,this._names=Io(t.getAttribute("class")||"")}qo.prototype={add:function(t){var n=this._names.indexOf(t);n<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Lo(t,n){for(var e=kr(t),r=-1,i=n.length;++r<i;)e.add(n[r])}function jo(t,n){for(var e=kr(t),r=-1,i=n.length;++r<i;)e.remove(n[r])}function ll(t){return function(){Lo(this,t)}}function fl(t){return function(){jo(this,t)}}function hl(t,n){return function(){(n.apply(this,arguments)?Lo:jo)(this,t)}}function dl(t,n){var e=Io(t+"");if(arguments.length<2){for(var r=kr(this.node()),i=-1,o=e.length;++i<o;)if(!r.contains(e[i]))return!1;return!0}return this.each((typeof n=="function"?hl:n?ll:fl)(e,n))}function pl(){this.textContent=""}function gl(t){return function(){this.textContent=t}}function yl(t){return function(){var n=t.apply(this,arguments);this.textContent=n??""}}function ml(t){return arguments.length?this.each(t==null?pl:(typeof t=="function"?yl:gl)(t)):this.node().textContent}function _l(){this.innerHTML=""}function vl(t){return function(){this.innerHTML=t}}function xl(t){return function(){var n=t.apply(this,arguments);this.innerHTML=n??""}}function wl(t){return arguments.length?this.each(t==null?_l:(typeof t=="function"?xl:vl)(t)):this.node().innerHTML}function bl(){this.nextSibling&&this.parentNode.appendChild(this)}function Ml(){return this.each(bl)}function kl(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function $l(){return this.each(kl)}function Sl(t){var n=typeof t=="function"?t:Oo(t);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function Tl(){return null}function Nl(t,n){var e=typeof t=="function"?t:Oo(t),r=n==null?Tl:typeof n=="function"?n:Ro(n);return this.select(function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)})}function Cl(){var t=this.parentNode;t&&t.removeChild(this)}function Al(){return this.each(Cl)}function El(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function Dl(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}function Pl(t){return this.select(t?Dl:El)}function Ol(t){return arguments.length?this.property("__data__",t):this.node().__data__}var Ho={},D=null;if(typeof document<"u"){var Rl=document.documentElement;"onmouseenter"in Rl||(Ho={mouseenter:"mouseover",mouseleave:"mouseout"})}function Fl(t,n,e){return t=Yo(t,n,e),function(r){var i=r.relatedTarget;(!i||i!==this&&!(i.compareDocumentPosition(this)&8))&&t.call(this,r)}}function Yo(t,n,e){return function(r){var i=D;D=r;try{t.call(this,this.__data__,n,e)}finally{D=i}}}function Ul(t){return t.trim().split(/^|\s+/).map(function(n){var e="",r=n.indexOf(".");return r>=0&&(e=n.slice(r+1),n=n.slice(0,r)),{type:n,name:e}})}function Il(t){return function(){var n=this.__on;if(n){for(var e=0,r=-1,i=n.length,o;e<i;++e)o=n[e],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.capture):n[++r]=o;++r?n.length=r:delete this.__on}}}function ql(t,n,e){var r=Ho.hasOwnProperty(t.type)?Fl:Yo;return function(i,o,a){var s=this.__on,c,u=r(n,o,a);if(s){for(var l=0,f=s.length;l<f;++l)if((c=s[l]).type===t.type&&c.name===t.name){this.removeEventListener(c.type,c.listener,c.capture),this.addEventListener(c.type,c.listener=u,c.capture=e),c.value=n;return}}this.addEventListener(t.type,u,e),c={type:t.type,name:t.name,value:n,listener:u,capture:e},s?s.push(c):this.__on=[c]}}function Ll(t,n,e){var r=Ul(t+""),i,o=r.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var c=0,u=s.length,l;c<u;++c)for(i=0,l=s[c];i<o;++i)if((a=r[i]).type===l.type&&a.name===l.name)return l.value}return}for(s=n?ql:Il,e==null&&(e=!1),i=0;i<o;++i)this.each(s(r[i],n,e));return this}function pi(t,n,e,r){var i=D;t.sourceEvent=D,D=t;try{return n.apply(e,r)}finally{D=i}}function zo(t,n,e){var r=Uo(t),i=r.CustomEvent;typeof i=="function"?i=new i(n,e):(i=r.document.createEvent("Event"),e?(i.initEvent(n,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(n,!1,!1)),t.dispatchEvent(i)}function jl(t,n){return function(){return zo(this,t,n)}}function Hl(t,n){return function(){return zo(this,t,n.apply(this,arguments))}}function Yl(t,n){return this.each((typeof n=="function"?Hl:jl)(t,n))}var zl=[null];function lt(t,n){this._groups=t,this._parents=n}lt.prototype={constructor:lt,select:$c,selectAll:Nc,filter:Ac,data:Rc,enter:Ec,exit:Fc,join:Uc,merge:Ic,order:qc,sort:Lc,call:Hc,nodes:Yc,node:zc,size:Wc,empty:Bc,each:Vc,attr:tl,style:il,property:cl,classed:dl,text:ml,html:wl,raise:Ml,lower:$l,append:Sl,insert:Nl,remove:Al,clone:Pl,datum:Ol,on:Ll,dispatch:Yl};function At(t){return typeof t=="string"?new lt([[document.querySelector(t)]],[document.documentElement]):new lt([[t]],zl)}var Wl=0;function gi(){this._="@"+(++Wl).toString(36)}gi.prototype={constructor:gi,get:function(t){for(var n=this._;!(n in t);)if(!(t=t.parentNode))return;return t[n]},set:function(t,n){return t[this._]=n},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};function Wo(){for(var t=D,n;n=t.sourceEvent;)t=n;return t}function Bo(t,n){var e=t.ownerSVGElement||t;if(e.createSVGPoint){var r=e.createSVGPoint();return r.x=n.clientX,r.y=n.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}var i=t.getBoundingClientRect();return[n.clientX-i.left-t.clientLeft,n.clientY-i.top-t.clientTop]}function Bl(t){var n=Wo();return n.changedTouches&&(n=n.changedTouches[0]),Bo(t,n)}function Vl(t,n,e){arguments.length<3&&(e=n,n=Wo().changedTouches);for(var r=0,i=n?n.length:0,o;r<i;++r)if((o=n[r]).identifier===e)return Bo(t,o);return null}var Xl={value:function(){}};function $r(){for(var t=0,n=arguments.length,e={},r;t<n;++t){if(!(r=arguments[t]+"")||r in e)throw new Error("illegal type: "+r);e[r]=[]}return new jn(e)}function jn(t){this._=t}function Zl(t,n){return t.trim().split(/^|\s+/).map(function(e){var r="",i=e.indexOf(".");if(i>=0&&(r=e.slice(i+1),e=e.slice(0,i)),e&&!n.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:r}})}jn.prototype=$r.prototype={constructor:jn,on:function(t,n){var e=this._,r=Zl(t+"",e),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(t=r[o]).type)&&(i=Gl(e[i],t.name)))return i;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++o<a;)if(i=(t=r[o]).type)e[i]=yi(e[i],t.name,n);else if(n==null)for(i in e)e[i]=yi(e[i],t.name,null);return this},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new jn(t)},call:function(t,n){if((i=arguments.length-2)>0)for(var e=new Array(i),r=0,i,o;r<i;++r)e[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(n,e)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(n,e)}};function Gl(t,n){for(var e=0,r=t.length,i;e<r;++e)if((i=t[e]).name===n)return i.value}function yi(t,n,e){for(var r=0,i=t.length;r<i;++r)if(t[r].name===n){t[r]=Xl,t=t.slice(0,r).concat(t.slice(r+1));break}return e!=null&&t.push({name:n,value:e}),t}function De(){D.stopImmediatePropagation()}function Xt(){D.preventDefault(),D.stopImmediatePropagation()}function Jl(t){var n=t.document.documentElement,e=At(t).on("dragstart.drag",Xt,!0);"onselectstart"in n?e.on("selectstart.drag",Xt,!0):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function Ql(t,n){var e=t.document.documentElement,r=At(t).on("dragstart.drag",null);n&&(r.on("click.drag",Xt,!0),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in e?r.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}function Pn(t){return function(){return t}}function rr(t,n,e,r,i,o,a,s,c,u){this.target=t,this.type=n,this.subject=e,this.identifier=r,this.active=i,this.x=o,this.y=a,this.dx=s,this.dy=c,this._=u}rr.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function Kl(){return!D.button}function tf(){return this.parentNode}function nf(t){return t??{x:D.x,y:D.y}}function ef(){return"ontouchstart"in this}function Vo(){var t=Kl,n=tf,e=nf,r=ef,i={},o=$r("start","drag","end"),a=0,s,c,u,l,f=0;function h(g){g.on("mousedown.drag",d).filter(r).on("touchstart.drag",y).on("touchmove.drag",w).on("touchend.drag touchcancel.drag",b).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function d(){if(!(l||!t.apply(this,arguments))){var g=x("mouse",n.apply(this,arguments),Bl,this,arguments);g&&(At(D.view).on("mousemove.drag",p,!0).on("mouseup.drag",m,!0),Jl(D.view),De(),u=!1,s=D.clientX,c=D.clientY,g("start"))}}function p(){if(Xt(),!u){var g=D.clientX-s,_=D.clientY-c;u=g*g+_*_>f}i.mouse("drag")}function m(){At(D.view).on("mousemove.drag mouseup.drag",null),Ql(D.view,u),Xt(),i.mouse("end")}function y(){if(t.apply(this,arguments)){var g=D.changedTouches,_=n.apply(this,arguments),v=g.length,k,A;for(k=0;k<v;++k)(A=x(g[k].identifier,_,Vl,this,arguments))&&(De(),A("start"))}}function w(){var g=D.changedTouches,_=g.length,v,k;for(v=0;v<_;++v)(k=i[g[v].identifier])&&(Xt(),k("drag"))}function b(){var g=D.changedTouches,_=g.length,v,k;for(l&&clearTimeout(l),l=setTimeout(function(){l=null},500),v=0;v<_;++v)(k=i[g[v].identifier])&&(De(),k("end"))}function x(g,_,v,k,A){var C=v(_,g),E,T,$,N=o.copy();if(pi(new rr(h,"beforestart",E,g,a,C[0],C[1],0,0,N),function(){return(D.subject=E=e.apply(k,A))==null?!1:(T=E.x-C[0]||0,$=E.y-C[1]||0,!0)}))return function I(O){var R=C,q;switch(O){case"start":i[g]=I,q=a++;break;case"end":delete i[g],--a;case"drag":C=v(_,g),q=a;break}pi(new rr(h,O,E,g,q,C[0]+T,C[1]+$,C[0]-R[0],C[1]-R[1],N),N.apply,N,[O,k,A])}}return h.filter=function(g){return arguments.length?(t=typeof g=="function"?g:Pn(!!g),h):t},h.container=function(g){return arguments.length?(n=typeof g=="function"?g:Pn(g),h):n},h.subject=function(g){return arguments.length?(e=typeof g=="function"?g:Pn(g),h):e},h.touchable=function(g){return arguments.length?(r=typeof g=="function"?g:Pn(!!g),h):r},h.on=function(){var g=o.on.apply(o,arguments);return g===o?h:g},h.clickDistance=function(g){return arguments.length?(f=(g=+g)*g,h):Math.sqrt(f)},h}var ir=Math.PI,or=2*ir,Pt=1e-6,rf=or-Pt;function ar(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Sr(){return new ar}ar.prototype=Sr.prototype={constructor:ar,moveTo:function(t,n){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,n){this._+="L"+(this._x1=+t)+","+(this._y1=+n)},quadraticCurveTo:function(t,n,e,r){this._+="Q"+ +t+","+ +n+","+(this._x1=+e)+","+(this._y1=+r)},bezierCurveTo:function(t,n,e,r,i,o){this._+="C"+ +t+","+ +n+","+ +e+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,n,e,r,i){t=+t,n=+n,e=+e,r=+r,i=+i;var o=this._x1,a=this._y1,s=e-t,c=r-n,u=o-t,l=a-n,f=u*u+l*l;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._+="M"+(this._x1=t)+","+(this._y1=n);else if(f>Pt)if(!(Math.abs(l*s-c*u)>Pt)||!i)this._+="L"+(this._x1=t)+","+(this._y1=n);else{var h=e-o,d=r-a,p=s*s+c*c,m=h*h+d*d,y=Math.sqrt(p),w=Math.sqrt(f),b=i*Math.tan((ir-Math.acos((p+f-m)/(2*y*w)))/2),x=b/w,g=b/y;Math.abs(x-1)>Pt&&(this._+="L"+(t+x*u)+","+(n+x*l)),this._+="A"+i+","+i+",0,0,"+ +(l*h>u*d)+","+(this._x1=t+g*s)+","+(this._y1=n+g*c)}},arc:function(t,n,e,r,i,o){t=+t,n=+n,e=+e,o=!!o;var a=e*Math.cos(r),s=e*Math.sin(r),c=t+a,u=n+s,l=1^o,f=o?r-i:i-r;if(e<0)throw new Error("negative radius: "+e);this._x1===null?this._+="M"+c+","+u:(Math.abs(this._x1-c)>Pt||Math.abs(this._y1-u)>Pt)&&(this._+="L"+c+","+u),e&&(f<0&&(f=f%or+or),f>rf?this._+="A"+e+","+e+",0,1,"+l+","+(t-a)+","+(n-s)+"A"+e+","+e+",0,1,"+l+","+(this._x1=c)+","+(this._y1=u):f>Pt&&(this._+="A"+e+","+e+",0,"+ +(f>=ir)+","+l+","+(this._x1=t+e*Math.cos(i))+","+(this._y1=n+e*Math.sin(i))))},rect:function(t,n,e,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)+"h"+ +e+"v"+ +r+"h"+-e+"Z"},toString:function(){return this._}};function ot(t){return function(){return t}}var B=1e-12,re=Math.PI,ie=re/2,of=2*re;function af(t){return t.innerRadius}function sf(t){return t.outerRadius}function uf(t){return t.startAngle}function cf(t){return t.endAngle}function lf(t){return t&&t.padAngle}function mi(t){return t>=1?ie:t<=-1?-ie:Math.asin(t)}function ff(t,n,e,r,i,o,a,s){var c=e-t,u=r-n,l=a-i,f=s-o,h=(l*(n-o)-f*(t-i))/(f*c-l*u);return[t+h*c,n+h*u]}function On(t,n,e,r,i,o,a){var s=t-e,c=n-r,u=(a?o:-o)/Math.sqrt(s*s+c*c),l=u*c,f=-u*s,h=t+l,d=n+f,p=e+l,m=r+f,y=(h+p)/2,w=(d+m)/2,b=p-h,x=m-d,g=b*b+x*x,_=i-o,v=h*m-p*d,k=(x<0?-1:1)*Math.sqrt(Math.max(0,_*_*g-v*v)),A=(v*x-b*k)/g,C=(-v*b-x*k)/g,E=(v*x+b*k)/g,T=(-v*b+x*k)/g,$=A-y,N=C-w,I=E-y,O=T-w;return $*$+N*N>I*I+O*O&&(A=E,C=T),{cx:A,cy:C,x01:-l,y01:-f,x11:A*(i/_-1),y11:C*(i/_-1)}}function hf(){var t=af,n=sf,e=ot(0),r=null,i=uf,o=cf,a=lf,s=null;function c(){var u,l,f=+t.apply(this,arguments),h=+n.apply(this,arguments),d=i.apply(this,arguments)-ie,p=o.apply(this,arguments)-ie,m=Math.abs(p-d),y=p>d;if(s||(s=u=Sr()),h<f&&(l=h,h=f,f=l),!(h>B))s.moveTo(0,0);else if(m>of-B)s.moveTo(h*Math.cos(d),h*Math.sin(d)),s.arc(0,0,h,d,p,!y),f>B&&(s.moveTo(f*Math.cos(p),f*Math.sin(p)),s.arc(0,0,f,p,d,y));else{var w=d,b=p,x=d,g=p,_=m,v=m,k=a.apply(this,arguments)/2,A=k>B&&(r?+r.apply(this,arguments):Math.sqrt(f*f+h*h)),C=Math.min(Math.abs(h-f)/2,+e.apply(this,arguments)),E=C,T=C,$,N;if(A>B){var I=mi(A/f*Math.sin(k)),O=mi(A/h*Math.sin(k));(_-=I*2)>B?(I*=y?1:-1,x+=I,g-=I):(_=0,x=g=(d+p)/2),(v-=O*2)>B?(O*=y?1:-1,w+=O,b-=O):(v=0,w=b=(d+p)/2)}var R=h*Math.cos(w),q=h*Math.sin(w),Y=f*Math.cos(g),H=f*Math.sin(g);if(C>B){var Ct=h*Math.cos(b),et=h*Math.sin(b),ft=f*Math.cos(x),rt=f*Math.sin(x);if(m<re){var V=_>B?ff(R,q,ft,rt,Ct,et,Y,H):[Y,H],it=R-V[0],sn=q-V[1],un=Ct-V[0],cn=et-V[1],S=1/Math.sin(Math.acos((it*un+sn*cn)/(Math.sqrt(it*it+sn*sn)*Math.sqrt(un*un+cn*cn)))/2),P=Math.sqrt(V[0]*V[0]+V[1]*V[1]);E=Math.min(C,(f-P)/(S-1)),T=Math.min(C,(h-P)/(S+1))}}v>B?T>B?($=On(ft,rt,R,q,h,T,y),N=On(Ct,et,Y,H,h,T,y),s.moveTo($.cx+$.x01,$.cy+$.y01),T<C?s.arc($.cx,$.cy,T,Math.atan2($.y01,$.x01),Math.atan2(N.y01,N.x01),!y):(s.arc($.cx,$.cy,T,Math.atan2($.y01,$.x01),Math.atan2($.y11,$.x11),!y),s.arc(0,0,h,Math.atan2($.cy+$.y11,$.cx+$.x11),Math.atan2(N.cy+N.y11,N.cx+N.x11),!y),s.arc(N.cx,N.cy,T,Math.atan2(N.y11,N.x11),Math.atan2(N.y01,N.x01),!y))):(s.moveTo(R,q),s.arc(0,0,h,w,b,!y)):s.moveTo(R,q),!(f>B)||!(_>B)?s.lineTo(Y,H):E>B?($=On(Y,H,Ct,et,f,-E,y),N=On(R,q,ft,rt,f,-E,y),s.lineTo($.cx+$.x01,$.cy+$.y01),E<C?s.arc($.cx,$.cy,E,Math.atan2($.y01,$.x01),Math.atan2(N.y01,N.x01),!y):(s.arc($.cx,$.cy,E,Math.atan2($.y01,$.x01),Math.atan2($.y11,$.x11),!y),s.arc(0,0,f,Math.atan2($.cy+$.y11,$.cx+$.x11),Math.atan2(N.cy+N.y11,N.cx+N.x11),y),s.arc(N.cx,N.cy,E,Math.atan2(N.y11,N.x11),Math.atan2(N.y01,N.x01),!y))):s.arc(0,0,f,g,x,y)}if(s.closePath(),u)return s=null,u+""||null}return c.centroid=function(){var u=(+t.apply(this,arguments)+ +n.apply(this,arguments))/2,l=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-re/2;return[Math.cos(l)*u,Math.sin(l)*u]},c.innerRadius=function(u){return arguments.length?(t=typeof u=="function"?u:ot(+u),c):t},c.outerRadius=function(u){return arguments.length?(n=typeof u=="function"?u:ot(+u),c):n},c.cornerRadius=function(u){return arguments.length?(e=typeof u=="function"?u:ot(+u),c):e},c.padRadius=function(u){return arguments.length?(r=u==null?null:typeof u=="function"?u:ot(+u),c):r},c.startAngle=function(u){return arguments.length?(i=typeof u=="function"?u:ot(+u),c):i},c.endAngle=function(u){return arguments.length?(o=typeof u=="function"?u:ot(+u),c):o},c.padAngle=function(u){return arguments.length?(a=typeof u=="function"?u:ot(+u),c):a},c.context=function(u){return arguments.length?(s=u??null,c):s},c}function Xo(t){this._context=t}Xo.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:this._context.lineTo(t,n);break}}};function Zo(t){return new Xo(t)}function df(t){return t[0]}function pf(t){return t[1]}function gf(){var t=df,n=pf,e=ot(!0),r=null,i=Zo,o=null;function a(s){var c,u=s.length,l,f=!1,h;for(r==null&&(o=i(h=Sr())),c=0;c<=u;++c)!(c<u&&e(l=s[c],c,s))===f&&((f=!f)?o.lineStart():o.lineEnd()),f&&o.point(+t(l,c,s),+n(l,c,s));if(h)return o=null,h+""||null}return a.x=function(s){return arguments.length?(t=typeof s=="function"?s:ot(+s),a):t},a.y=function(s){return arguments.length?(n=typeof s=="function"?s:ot(+s),a):n},a.defined=function(s){return arguments.length?(e=typeof s=="function"?s:ot(!!s),a):e},a.curve=function(s){return arguments.length?(i=s,r!=null&&(o=i(r)),a):i},a.context=function(s){return arguments.length?(s==null?r=o=null:o=i(r=s),a):r},a}function oe(){}function _i(t,n,e){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+n)/6,(t._y0+4*t._y1+e)/6)}function Tr(t){this._context=t}Tr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:_i(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:_i(this,t,n);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}};function Go(t,n){this._basis=new Tr(t),this._beta=n}Go.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,n=this._y,e=t.length-1;if(e>0)for(var r=t[0],i=n[0],o=t[e]-r,a=n[e]-i,s=-1,c;++s<=e;)c=s/e,this._basis.point(this._beta*t[s]+(1-this._beta)*(r+c*o),this._beta*n[s]+(1-this._beta)*(i+c*a));this._x=this._y=null,this._basis.lineEnd()},point:function(t,n){this._x.push(+t),this._y.push(+n)}};(function t(n){function e(r){return n===1?new Tr(r):new Go(r,n)}return e.beta=function(r){return t(+r)},e})(.85);function ae(t,n,e){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-n),t._y2+t._k*(t._y1-e),t._x2,t._y2)}function Nr(t,n){this._context=t,this._k=(1-n)/6}Nr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:ae(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2,this._x1=t,this._y1=n;break;case 2:this._point=3;default:ae(this,t,n);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};(function t(n){function e(r){return new Nr(r,n)}return e.tension=function(r){return t(+r)},e})(0);function Cr(t,n){this._context=t,this._k=(1-n)/6}Cr.prototype={areaStart:oe,areaEnd:oe,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:ae(this,t,n);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};(function t(n){function e(r){return new Cr(r,n)}return e.tension=function(r){return t(+r)},e})(0);function Ar(t,n){this._context=t,this._k=(1-n)/6}Ar.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ae(this,t,n);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};(function t(n){function e(r){return new Ar(r,n)}return e.tension=function(r){return t(+r)},e})(0);function Er(t,n,e){var r=t._x1,i=t._y1,o=t._x2,a=t._y2;if(t._l01_a>B){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,c=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/c,i=(i*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/c}if(t._l23_a>B){var u=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,l=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*u+t._x1*t._l23_2a-n*t._l12_2a)/l,a=(a*u+t._y1*t._l23_2a-e*t._l12_2a)/l}t._context.bezierCurveTo(r,i,o,a,t._x2,t._y2)}function Jo(t,n){this._context=t,this._alpha=n}Jo.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3;default:Er(this,t,n);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const yf=function t(n){function e(r){return n?new Jo(r,n):new Nr(r,0)}return e.alpha=function(r){return t(+r)},e}(.5);function Qo(t,n){this._context=t,this._alpha=n}Qo.prototype={areaStart:oe,areaEnd:oe,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:Er(this,t,n);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};(function t(n){function e(r){return n?new Qo(r,n):new Cr(r,0)}return e.alpha=function(r){return t(+r)},e})(.5);function Ko(t,n){this._context=t,this._alpha=n}Ko.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Er(this,t,n);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};(function t(n){function e(r){return n?new Ko(r,n):new Ar(r,0)}return e.alpha=function(r){return t(+r)},e})(.5);function vi(t){return t<0?-1:1}function xi(t,n,e){var r=t._x1-t._x0,i=n-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(e-t._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(vi(o)+vi(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function wi(t,n){var e=t._x1-t._x0;return e?(3*(t._y1-t._y0)/e-n)/2:n}function Pe(t,n,e){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,s=(o-r)/3;t._context.bezierCurveTo(r+s,i+s*n,o-s,a-s*e,o,a)}function sr(t){this._context=t}sr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Pe(this,this._t0,wi(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){var e=NaN;if(t=+t,n=+n,!(t===this._x1&&n===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,Pe(this,wi(this,e=xi(this,t,n)),e);break;default:Pe(this,this._t0,e=xi(this,t,n));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n,this._t0=e}}};Object.create(sr.prototype).point=function(t,n){sr.prototype.point.call(this,n,t)};var mf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},on=function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")},an=function(){function t(n,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),J=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},Mt=function t(n,e,r){n===null&&(n=Function.prototype);var i=Object.getOwnPropertyDescriptor(n,e);if(i===void 0){var o=Object.getPrototypeOf(n);return o===null?void 0:t(o,e,r)}else{if("value"in i)return i.value;var a=i.get;return a===void 0?void 0:a.call(r)}},Dr=function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)},Pr=function(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n&&(typeof n=="object"||typeof n=="function")?n:t},_f=function(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}else return Array.from(t)},vf=function(){function t(n){var e=n.x,r=e===void 0?0:e,i=n.y,o=i===void 0?0:i,a=n.nx,s=n.ny,c=n.dy,u=c===void 0?0:c,l=n.dx,f=l===void 0?0:l,h=n.color,d=h===void 0?"grey":h,p=n.data,m=n.type,y=n.subject,w=n.connector,b=n.note,x=n.disable,g=n.id,_=n.className;on(this,t),this._dx=a!==void 0?a-r:f,this._dy=s!==void 0?s-o:u,this._x=r,this._y=o,this._color=d,this.id=g,this._className=_||"",this._type=m||"",this.data=p,this.note=b||{},this.connector=w||{},this.subject=y||{},this.disable=x||[]}return an(t,[{key:"updatePosition",value:function(){this.type.setPosition&&(this.type.setPosition(),this.type.subject&&this.type.subject.selectAll(":not(.handle)").nodes().length!==0&&this.type.redrawSubject())}},{key:"clearComponents",value:function(){this.type.clearComponents&&this.type.clearComponents()}},{key:"updateOffset",value:function(){this.type.setOffset&&(this.type.setOffset(),this.type.connector.selectAll(":not(.handle)").nodes().length!==0&&this.type.redrawConnector(),this.type.redrawNote())}},{key:"className",get:function(){return this._className},set:function(e){this._className=e,this.type.setClassName&&this.type.setClassName()}},{key:"type",get:function(){return this._type},set:function(e){this._type=e,this.clearComponents()}},{key:"x",get:function(){return this._x},set:function(e){this._x=e,this.updatePosition()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this.updatePosition()}},{key:"color",get:function(){return this._color},set:function(e){this._color=e,this.updatePosition()}},{key:"dx",get:function(){return this._dx},set:function(e){this._dx=e,this.updateOffset()}},{key:"dy",get:function(){return this._dy},set:function(e){this._dy=e,this.updateOffset()}},{key:"nx",set:function(e){this._dx=e-this._x,this.updateOffset()}},{key:"ny",set:function(e){this._dy=e-this._y,this.updateOffset()}},{key:"offset",get:function(){return{x:this._dx,y:this._dy}},set:function(e){var r=e.x,i=e.y;this._dx=r,this._dy=i,this.updateOffset()}},{key:"position",get:function(){return{x:this._x,y:this._y}},set:function(e){var r=e.x,i=e.y;this._x=r,this._y=i,this.updatePosition()}},{key:"translation",get:function(){return{x:this._x+this._dx,y:this._y+this._dy}}},{key:"json",get:function(){var e={x:this._x,y:this._y,dx:this._dx,dy:this._dy};return this.data&&Object.keys(this.data).length>0&&(e.data=this.data),this.type&&(e.type=this.type),this._className&&(e.className=this._className),Object.keys(this.connector).length>0&&(e.connector=this.connector),Object.keys(this.subject).length>0&&(e.subject=this.subject),Object.keys(this.note).length>0&&(e.note=this.note),e}}]),t}(),xf=function(){function t(n){var e=n.annotations,r=n.accessors,i=n.accessorsInverse;on(this,t),this.accessors=r,this.accessorsInverse=i,this.annotations=e}return an(t,[{key:"clearTypes",value:function(e){this.annotations.forEach(function(r){r.type=void 0,r.subject=e&&e.subject||r.subject,r.connector=e&&e.connector||r.connector,r.note=e&&e.note||r.note})}},{key:"setPositionWithAccessors",value:function(){var e=this;this.annotations.forEach(function(r){r.type.setPositionWithAccessors(e.accessors)})}},{key:"editMode",value:function(e){this.annotations.forEach(function(r){r.type&&(r.type.editMode=e,r.type.updateEditMode())})}},{key:"updateDisable",value:function(e){this.annotations.forEach(function(r){r.disable=e,r.type&&e.forEach(function(i){r.type[i]&&(r.type[i].remove&&r.type[i].remove(),r.type[i]=void 0)})})}},{key:"updateTextWrap",value:function(e){this.annotations.forEach(function(r){r.type&&r.type.updateTextWrap&&r.type.updateTextWrap(e)})}},{key:"updateText",value:function(){this.annotations.forEach(function(e){e.type&&e.type.drawText&&e.type.drawText()})}},{key:"updateNotePadding",value:function(e){this.annotations.forEach(function(r){r.type&&(r.type.notePadding=e)})}},{key:"json",get:function(){var e=this;return this.annotations.map(function(r){var i=r.json;return e.accessorsInverse&&r.data&&(i.data={},Object.keys(e.accessorsInverse).forEach(function(o){i.data[o]=e.accessorsInverse[o]({x:r.x,y:r.y})})),i})}},{key:"noteNodes",get:function(){return this.annotations.map(function(e){return J({},e.type.getNoteBBoxOffset(),{positionX:e.x,positionY:e.y})})}}]),t}(),wf=function(n){var e=n.cx,r=e===void 0?0:e,i=n.cy,o=i===void 0?0:i;return{move:{x:r,y:o}}},bf=function(n){var e=n.cx,r=e===void 0?0:e,i=n.cy,o=i===void 0?0:i,a=n.r1,s=n.r2,c=n.padding,u={move:{x:r,y:o}};return a!==void 0&&(u.r1={x:r+a/Math.sqrt(2),y:o+a/Math.sqrt(2)}),s!==void 0&&(u.r2={x:r+s/Math.sqrt(2),y:o+s/Math.sqrt(2)}),c!==void 0&&(u.padding={x:r+a+c,y:o}),u},Mf=function(n){var e=n.group,r=n.handles,i=n.r,o=i===void 0?10:i,a=e.selectAll("circle.handle").data(r);a.enter().append("circle").attr("class","handle").attr("fill","grey").attr("fill-opacity",.1).attr("cursor","move").attr("stroke-dasharray",5).attr("stroke","grey").call(Vo().container(At("g.annotations").node()).on("start",function(s){return s.start&&s.start(s)}).on("drag",function(s){return s.drag&&s.drag(s)}).on("end",function(s){return s.end&&s.end(s)})),e.selectAll("circle.handle").attr("cx",function(s){return s.x}).attr("cy",function(s){return s.y}).attr("r",function(s){return s.r||o}).attr("class",function(s){return"handle "+(s.className||"")}),a.exit().remove()},ta=function(n,e){return(n==="dynamic"||n==="left"||n==="right")&&(e<0?n="top":n="bottom"),n},na=function(n,e){return(n==="dynamic"||n==="top"||n==="bottom")&&(e<0?n="right":n="left"),n},kf=["topBottom","top","bottom"],$f=["leftRight","left","right"],Sf=function(t){var n=t.padding,e=n===void 0?0:n,r=t.bbox,i=r===void 0?{x:0,width:0,height:0}:r,o=t.align,a=t.orientation,s=t.offset,c=s===void 0?{x:0,y:0}:s,u=-i.x,l=0;return kf.indexOf(a)!==-1?(o=na(o,c.x),c.y<0&&a==="topBottom"||a==="top"?l-=i.height+e:l+=e,o==="middle"?u-=i.width/2:o==="right"&&(u-=i.width)):$f.indexOf(a)!==-1&&(o=ta(o,c.y),c.x<0&&a==="leftRight"||a==="left"?u-=i.width+e:u+=e,o==="middle"?l-=i.height/2:o==="top"&&(l-=i.height)),{x:u,y:l}},xt=function(n){var e=n.data,r=n.curve,i=r===void 0?Zo:r,o=n.canvasContext,a=n.className,s=n.classID,c=gf().curve(i),u={type:"path",className:a,classID:s,data:e};return o?(c.context(o),u.pathMethods=c):u.attrs={d:c(e)},u},se=function(n){var e=n.data,r=n.canvasContext,i=n.className,o=n.classID,a={type:"path",className:i,classID:o,data:e},s=hf().innerRadius(e.innerRadius||0).outerRadius(e.outerRadius||e.radius||2).startAngle(e.startAngle||0).endAngle(e.endAngle||2*Math.PI);return r?(s.context(r),a.pathMethods=lineGen):a.attrs={d:s()},a},Tf=function(t){var n=t.align,e=t.x,r=e===void 0?0:e,i=t.y,o=i===void 0?0:i,a=t.bbox,s=t.offset;n=ta(n,s.y),n==="top"?o-=a.height:n==="middle"&&(o-=a.height/2);var c=[[r,o],[r,o+a.height]];return{components:[xt({data:c,className:"note-line"})]}},Nf=function(t){var n=t.align,e=t.x,r=e===void 0?0:e,i=t.y,o=i===void 0?0:i,a=t.offset,s=t.bbox;n=na(n,a.x),n==="right"?r-=s.width:n==="middle"&&(r-=s.width/2);var c=[[r,o],[r+s.width,o]];return{components:[xt({data:c,className:"note-line"})]}},ea=function(n){var e=n.type,r=n.subjectType,i=e.annotation,o=i.position,a=i.x-o.x,s=a+i.dx,c=i.y-o.y,u=c+i.dy,l=i.subject;if(r==="circle"&&(l.outerRadius||l.radius)){var f=Math.sqrt((a-s)*(a-s)+(c-u)*(c-u)),h=Math.asin(-u/f),d=l.outerRadius||l.radius+(l.radiusPadding||0);a=Math.abs(Math.cos(h)*d)*(s<0?-1:1),c=Math.abs(Math.sin(h)*d)*(u<0?-1:1)}if(r==="rect"){var p=l.width,m=l.height;(p>0&&i.dx>0||p<0&&i.dx<0)&&(Math.abs(p)>Math.abs(i.dx)?a=p/2:a=p),(m>0&&i.dy>0||m<0&&i.dy<0)&&(Math.abs(m)>Math.abs(i.dy)?c=m/2:c=m),a===p/2&&c===m/2&&(a=s,c=u)}return[[a,c],[s,u]]},Cf=function(t){var n=ea(t);return{components:[xt({data:n,className:"connector"})]}},Af=function(t){var n=t.type,e=t.subjectType,r=n.annotation,i=r.position,o=r.x-i.x,a=o+r.dx,s=r.y-i.y,c=s+r.dy,u=r.subject;if(e==="rect"){var l=u.width,f=u.height;(l>0&&r.dx>0||l<0&&r.dx<0)&&(Math.abs(l)>Math.abs(r.dx)?o=l/2:o=l),(f>0&&r.dy>0||f<0&&r.dy<0)&&(Math.abs(f)>Math.abs(r.dy)?s=f/2:s=f),o===l/2&&s===f/2&&(o=a,s=c)}var h=[[o,s],[a,c]],d=c-s,p=a-o,m=a,y=c,w=c<s&&a>o||a<o&&c>s?-1:1;if(Math.abs(p)<Math.abs(d)?(m=a,y=s+p*w):(y=c,m=o+d*w),e==="circle"&&(u.outerRadius||u.radius)){var b=(u.outerRadius||u.radius)+(u.radiusPadding||0),x=b/Math.sqrt(2);if(Math.abs(p)>x&&Math.abs(d)>x)o=x*(a<0?-1:1),s=x*(c<0?-1:1),h=[[o,s],[m,y],[a,c]];else if(Math.abs(p)>Math.abs(d)){var g=Math.asin(-c/b);o=Math.abs(Math.cos(g)*b)*(a<0?-1:1),h=[[o,c],[a,c]]}else{var _=Math.acos(a/b);s=Math.abs(Math.sin(_)*b)*(c<0?-1:1),h=[[a,s],[a,c]]}}else h=[[o,s],[m,y],[a,c]];return{components:[xt({data:h,className:"connector"})]}},Ef=function(t){var n=t.type,e=t.connectorData,r=t.subjectType;e||(e={}),(!e.points||typeof e.points=="number")&&(e.points=Df(n.annotation.offset,e.points)),e.curve||(e.curve=yf);var i=[];if(n.editMode){var o=e.points.map(function(u,l){return J({},wf({cx:u[0],cy:u[1]}),{index:l})}),a=function(l){e.points[l][0]+=D.dx,e.points[l][1]+=D.dy,n.redrawConnector()};i=n.mapHandles(o.map(function(u){return J({},u.move,{drag:a.bind(n,u.index)})}))}var s=ea({type:n,subjectType:r});s=[s[0]].concat(_f(e.points),[s[1]]);var c=[xt({data:s,curve:e.curve,className:"connector"})];return{components:c,handles:i}},Df=function(n){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,r={x:n.x/(e+1),y:n.y/(e+1)},i=[],o=1;o<=e;o++)i.push([r.x*o+o%2*20,r.y*o-o%2*20]);return i},Pf=function(t){var n=t.annotation,e=t.start,r=t.end,i=t.scale,o=i===void 0?1:i,a=n.position;e?e=[-r[0]+e[0],-r[1]+e[1]]:e=[n.dx,n.dy],r||(r=[n.x-a.x,n.y-a.y]);var s=r[0],c=r[1],u=e[0],l=e[1],f=10*o,h=16/180*Math.PI,d=Math.atan(l/u);u<0&&(d+=Math.PI);var p=[[s,c],[Math.cos(d+h)*f+s,Math.sin(d+h)*f+c],[Math.cos(d-h)*f+s,Math.sin(d-h)*f+c],[s,c]];return{components:[xt({data:p,className:"connector-end connector-arrow",classID:"connector-end"})]}},Of=function(t){var n=t.line,e=t.scale,r=e===void 0?1:e,i=se({className:"connector-end connector-dot",classID:"connector-end",data:{radius:3*Math.sqrt(r)}});return i.attrs.transform="translate("+n.data[0][0]+", "+n.data[0][1]+")",{components:[i]}},Rf=function(t){var n=t.subjectData,e=t.type;!n.radius&&!n.outerRadius&&(n.radius=20);var r=[],i=se({data:n,className:"subject"});if(e.editMode){var o=bf({r1:i.data.outerRadius||i.data.radius,r2:i.data.innerRadius,padding:n.radiusPadding}),a=function(u){var l=n[u]+D.dx*Math.sqrt(2);n[u]=l,e.redrawSubject(),e.redrawConnector()},s=[J({},o.r1,{drag:a.bind(e,n.outerRadius!==void 0?"outerRadius":"radius")})];n.innerRadius&&s.push(J({},o.r2,{drag:a.bind(e,"innerRadius")})),r=e.mapHandles(s)}return i.attrs["fill-opacity"]=0,{components:[i],handles:r}},Ff=function(t){var n=t.subjectData,e=t.type;n.width||(n.width=100),n.height||(n.height=100);var r=[],i=n.width,o=n.height,a=[[0,0],[i,0],[i,o],[0,o],[0,0]],s=xt({data:a,className:"subject"});if(e.editMode){var c=function(){n.width=D.x,e.redrawSubject(),e.redrawConnector()},u=function(){n.height=D.y,e.redrawSubject(),e.redrawConnector()},l=[{x:i,y:o/2,drag:c.bind(e)},{x:i/2,y:o,drag:u.bind(e)}];r=e.mapHandles(l)}return s.attrs["fill-opacity"]=.1,{components:[s],handles:r}},Uf=function(t){var n=t.subjectData,e=t.type,r=e.annotation.position,i=(n.x1!==void 0?n.x1:r.x)-r.x,o=(n.x2!==void 0?n.x2:r.x)-r.x,a=(n.y1!==void 0?n.y1:r.y)-r.y,s=(n.y2!==void 0?n.y2:r.y)-r.y,c=[[i,a],[o,s]];return{components:[xt({data:c,className:"subject"})]}},If=function(t){var n=t.subjectData,e=n===void 0?{}:n,r=t.type,i=r===void 0?{}:r,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=i.typeSettings&&i.typeSettings.subject;e.radius||(a&&a.radius?e.radius=a.radius:e.radius=14),e.x||a&&a.x&&(e.x=a.x),e.y||a&&a.y&&(e.y=a.y);var s=[],c=[],u=e.radius,l=u*.7,f=0,h=0,d=Math.sqrt(2)*u,p={xleftcorner:-u,xrightcorner:u,ytopcorner:-u,ybottomcorner:u,xleft:-d,xright:d,ytop:-d,ybottom:d};e.x&&!e.y?f=p["x"+e.x]:e.y&&!e.x?h=p["y"+e.y]:e.x&&e.y&&(f=p["x"+e.x+"corner"],h=p["y"+e.y+"corner"]);var m="translate("+f+", "+h+")",y=se({className:"subject",data:{radius:u}});y.attrs.transform=m,y.attrs.fill=o.color,y.attrs["stroke-linecap"]="round",y.attrs["stroke-width"]="3px";var w=se({className:"subject-ring",data:{outerRadius:u,innerRadius:l}});w.attrs.transform=m,w.attrs["stroke-width"]="3px",w.attrs.fill="white";var b=void 0;if(f&&h||!f&&!h)b=xt({className:"subject-pointer",data:[[0,0],[f||0,0],[0,h||0],[0,0]]});else if(f||h){var x=function(A){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return A&&A/Math.sqrt(2)/Math.sqrt(2)||C*u/Math.sqrt(2)};b=xt({className:"subject-pointer",data:[[0,0],[x(f),x(h)],[x(f,-1),x(h,-1)],[0,0]]})}if(b&&(b.attrs.fill=o.color,b.attrs["stroke-linecap"]="round",b.attrs["stroke-width"]="3px",c.push(b)),i.editMode){var g=function(){e.x=D.x<-u*2?"left":D.x>u*2?"right":void 0,e.y=D.y<-u*2?"top":D.y>u*2?"bottom":void 0,i.redrawSubject()},_={x:f*2,y:h*2,drag:g.bind(i)};!_.x&&!_.y&&(_.y=-u),s=i.mapHandles([_])}var v=void 0;return e.text&&(v={type:"text",className:"badge-text",attrs:{fill:"white",stroke:"none","font-size":".7em",text:e.text,"text-anchor":"middle",dy:".25em",x:f,y:h}}),c.push(y),c.push(w),c.push(v),{components:c,handles:s}},ra=function(){function t(n){var e=n.a,r=n.annotation,i=n.editMode,o=n.dispatcher,a=n.notePadding,s=n.accessors;if(on(this,t),this.a=e,this.note=r.disable.indexOf("note")===-1&&e.select("g.annotation-note"),this.noteContent=this.note&&e.select("g.annotation-note-content"),this.connector=r.disable.indexOf("connector")===-1&&e.select("g.annotation-connector"),this.subject=r.disable.indexOf("subject")===-1&&e.select("g.annotation-subject"),this.dispatcher=o,o){var c=Lf.bind(null,o,r);c({component:this.note,name:"note"}),c({component:this.connector,name:"connector"}),c({component:this.subject,name:"subject"})}this.annotation=r,this.editMode=r.editMode||i,this.notePadding=a!==void 0?a:3,this.offsetCornerX=0,this.offsetCornerY=0,s&&r.data&&this.init(s)}return an(t,[{key:"init",value:function(e){this.annotation.x||this.mapX(e),this.annotation.y||this.mapY(e)}},{key:"mapY",value:function(e){e.y&&(this.annotation.y=e.y(this.annotation.data))}},{key:"mapX",value:function(e){e.x&&(this.annotation.x=e.x(this.annotation.data))}},{key:"updateEditMode",value:function(){this.a.selectAll("circle.handle").remove()}},{key:"drawOnSVG",value:function(e,r){var i=this;Array.isArray(r)||(r=[r]),r.filter(function(o){return o}).forEach(function(o){var a=o.type,s=o.className,c=o.attrs,u=o.handles,l=o.classID;if(a==="handle")Mf({group:e,r:c&&c.r,handles:u});else{mt(e,[i.annotation],a,s,l);for(var f=e.select(a+"."+(l||s)),h=Object.keys(c),d=[],p=f.node().attributes,m=p.length-1;m>=0;m--){var y=p[m].name;h.indexOf(y)===-1&&y!=="class"&&d.push(y)}h.forEach(function(w){w==="text"?f.text(c[w]):f.attr(w,c[w])}),d.forEach(function(w){return f.attr(w,null)})}})}},{key:"getNoteBBox",value:function(){return Mi(this.note,".annotation-note-content text")}},{key:"getNoteBBoxOffset",value:function(){var e=Mi(this.note,".annotation-note-content"),r=this.noteContent.attr("transform").split(/\(|\,|\)/g);return e.offsetCornerX=parseFloat(r[1])+this.annotation.dx,e.offsetCornerY=parseFloat(r[2])+this.annotation.dy,e.offsetX=this.annotation.dx,e.offsetY=this.annotation.dy,e}},{key:"drawSubject",value:function(){var e=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=this.annotation.subject,o=r.type,a={type:this,subjectData:i},s={};o==="circle"?s=Rf(a):o==="rect"?s=Ff(a):o==="threshold"?s=Uf(a):o==="badge"&&(s=If(a,this.annotation));var c=s,u=c.components,l=u===void 0?[]:u,f=c.handles,h=f===void 0?[]:f;return l.forEach(function(d){d&&d.attrs&&!d.attrs.stroke&&(d.attrs.stroke=e.annotation.color)}),this.editMode&&(h=h.concat(this.mapHandles([{drag:this.dragSubject.bind(this)}])),l.push({type:"handle",handles:h})),l}},{key:"drawConnector",value:function(){var e=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=this.annotation.connector,o=i.type||r.type,a={type:this,connectorData:i};a.subjectType=this.typeSettings&&this.typeSettings.subject&&this.typeSettings.subject.type;var s={};o==="curve"?s=Ef(a):o==="elbow"?s=Af(a):s=Cf(a);var c=s,u=c.components,l=u===void 0?[]:u,f=c.handles,h=f===void 0?[]:f,d=l[0];d&&(d.attrs.stroke=this.annotation.color,d.attrs.fill="none");var p=i.end||r.end,m={};if(p==="arrow"){var y=d.data[1],w=d.data[0],b=Math.sqrt(Math.pow(y[0]-w[0],2)+Math.pow(y[1]-w[1],2));b<5&&d.data[2]&&(y=d.data[2]),m=Pf({annotation:this.annotation,start:y,end:w,scale:i.endScale})}else p==="dot"?m=Of({line:d,scale:i.endScale}):(!p||p==="none")&&this.connector&&this.connector.select(".connector-end").remove();return m.components&&(m.components.forEach(function(x){x.attrs.fill=e.annotation.color,x.attrs.stroke=e.annotation.color}),l=l.concat(m.components)),this.editMode&&h.length!==0&&l.push({type:"handle",handles:h}),l}},{key:"drawNote",value:function(){var e=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=this.annotation.note,o=i.align||r.align||"dynamic",a={bbox:r.bbox,align:o,offset:this.annotation.offset},s=i.lineType||r.lineType,c={};s==="vertical"?c=Tf(a):s==="horizontal"&&(c=Nf(a));var u=c,l=u.components,f=l===void 0?[]:l,h=u.handles,d=h===void 0?[]:h;if(f.forEach(function(w){w.attrs.stroke=e.annotation.color}),this.editMode){d=this.mapHandles([{x:0,y:0,drag:this.dragNote.bind(this)}]),f.push({type:"handle",handles:d});var p=this.dragNote.bind(this),m=this.dragstarted.bind(this),y=this.dragended.bind(this);this.note.call(Vo().container(At("g.annotations").node()).on("start",function(w){return m(w)}).on("drag",function(w){return p(w)}).on("end",function(w){return y(w)}))}else this.note.on("mousedown.drag",null);return f}},{key:"drawNoteContent",value:function(e){var r=this.annotation.note,i=r.padding!==void 0?r.padding:this.notePadding,o=r.orientation||e.orientation||"topBottom",a=r.lineType||e.lineType,s=r.align||e.align||"dynamic";a==="vertical"?o="leftRight":a==="horizontal"&&(o="topBottom");var c={padding:i,bbox:e.bbox,offset:this.annotation.offset,orientation:o,align:s},u=Sf(c),l=u.x,f=u.y;return this.offsetCornerX=l+this.annotation.dx,this.offsetCornerY=f+this.annotation.dy,this.note&&this.noteContent.attr("transform","translate("+l+", "+f+")"),[]}},{key:"drawOnScreen",value:function(e,r){return this.drawOnSVG(e,r)}},{key:"redrawSubject",value:function(){this.subject&&this.drawOnScreen(this.subject,this.drawSubject())}},{key:"redrawConnector",value:function(){this.connector&&this.drawOnScreen(this.connector,this.drawConnector())}},{key:"redrawNote",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getNoteBBox();this.noteContent&&this.drawOnScreen(this.noteContent,this.drawNoteContent({bbox:e})),this.note&&this.drawOnScreen(this.note,this.drawNote({bbox:e}))}},{key:"setPosition",value:function(){var e=this.annotation.position;this.a.attr("transform","translate("+e.x+", "+e.y+")")}},{key:"clearComponents",value:function(){this.subject&&this.subject.select("*").remove(),this.connector&&this.connector.select("*").remove()}},{key:"setOffset",value:function(){if(this.note){var e=this.annotation.offset;this.note.attr("transform","translate("+e.x+", "+e.y+")")}}},{key:"setPositionWithAccessors",value:function(e){e&&this.annotation.data&&(this.mapX(e),this.mapY(e)),this.setPosition()}},{key:"setClassName",value:function(){this.a.attr("class","annotation "+(this.className&&this.className())+" "+(this.editMode?"editable":"")+" "+(this.annotation.className||""))}},{key:"draw",value:function(){this.setClassName(),this.setPosition(),this.setOffset(),this.redrawSubject(),this.redrawConnector(),this.redrawNote()}},{key:"dragstarted",value:function(){D.sourceEvent.stopPropagation(),this.dispatcher&&this.dispatcher.call("dragstart",this.a,this.annotation),this.a.classed("dragging",!0),this.a.selectAll("circle.handle").style("pointer-events","none")}},{key:"dragended",value:function(){this.dispatcher&&this.dispatcher.call("dragend",this.a,this.annotation),this.a.classed("dragging",!1),this.a.selectAll("circle.handle").style("pointer-events","all")}},{key:"dragSubject",value:function(){var e=this.annotation.position;e.x+=D.dx,e.y+=D.dy,this.annotation.position=e}},{key:"dragNote",value:function(){var e=this.annotation.offset;e.x+=D.dx,e.y+=D.dy,this.annotation.offset=e}},{key:"mapHandles",value:function(e){var r=this;return e.map(function(i){return J({},i,{start:r.dragstarted.bind(r),end:r.dragended.bind(r)})})}}]),t}(),Et=function(n,e,r){return function(i){Dr(o,i);function o(a){on(this,o);var s=Pr(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,a));return s.typeSettings=e,e.disable&&e.disable.forEach(function(c){s[c]&&s[c].remove(),s[c]=void 0,c==="note"&&(s.noteContent=void 0)}),s}return an(o,[{key:"className",value:function(){return""+(e.className||Mt(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"className",this)&&Mt(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"className",this).call(this)||"")}},{key:"drawSubject",value:function(s){return this.typeSettings.subject=J({},e.subject,this.typeSettings.subject),Mt(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"drawSubject",this).call(this,J({},s,this.typeSettings.subject))}},{key:"drawConnector",value:function(s){return this.typeSettings.connector=J({},e.connector,this.typeSettings.connector),Mt(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"drawConnector",this).call(this,J({},s,e.connector,this.typeSettings.connector))}},{key:"drawNote",value:function(s){return this.typeSettings.note=J({},e.note,this.typeSettings.note),Mt(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"drawNote",this).call(this,J({},s,e.note,this.typeSettings.note))}},{key:"drawNoteContent",value:function(s){return Mt(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"drawNoteContent",this).call(this,J({},s,e.note,this.typeSettings.note))}}],[{key:"init",value:function(s,c){return Mt(o.__proto__||Object.getPrototypeOf(o),"init",this).call(this,s,c),r&&(s=r(s,c)),s}}]),o}(n)},xe=function(t){Dr(n,t);function n(e){on(this,n);var r=Pr(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return r.textWrap=e.textWrap||120,r.drawText(),r}return an(n,[{key:"updateTextWrap",value:function(r){this.textWrap=r,this.drawText()}},{key:"drawText",value:function(){if(this.note){mt(this.note,[this.annotation],"g","annotation-note-content");var r=this.note.select("g.annotation-note-content");mt(r,[this.annotation],"rect","annotation-note-bg"),mt(r,[this.annotation],"text","annotation-note-label"),mt(r,[this.annotation],"text","annotation-note-title");var i={height:0},o=this.a.select("text.annotation-note-label"),a=this.annotation.note&&this.annotation.note.wrap||this.typeSettings&&this.typeSettings.note&&this.typeSettings.note.wrap||this.textWrap,s=this.annotation.note&&this.annotation.note.wrapSplitter||this.typeSettings&&this.typeSettings.note&&this.typeSettings.note.wrapSplitter,c=this.annotation.note&&this.annotation.note.bgPadding||this.typeSettings&&this.typeSettings.note&&this.typeSettings.note.bgPadding,u={top:0,bottom:0,left:0,right:0};if(typeof c=="number"?u={top:c,bottom:c,left:c,right:c}:c&&(typeof c>"u"?"undefined":mf(c))==="object"&&(u=J(u,c)),this.annotation.note.title){var l=this.a.select("text.annotation-note-title");l.text(this.annotation.note.title),l.attr("fill",this.annotation.color),l.attr("font-weight","bold"),l.call(bi,a,s),i=l.node().getBBox()}o.text(this.annotation.note.label).attr("dx","0"),o.call(bi,a,s),o.attr("y",i.height*1.1||0),o.attr("fill",this.annotation.color);var f=this.getNoteBBox();this.a.select("rect.annotation-note-bg").attr("width",f.width+u.left+u.right).attr("height",f.height+u.top+u.bottom).attr("x",f.x-u.left).attr("y",-u.top).attr("fill","white").attr("fill-opacity",0)}}}]),n}(ra);Et(xe,{className:"label",note:{align:"middle"}});var we=Et(xe,{className:"callout",note:{lineType:"horizontal"}});Et(we,{className:"callout elbow",connector:{type:"elbow"}});Et(we,{className:"callout curve",connector:{type:"curve"}});Et(ra,{className:"badge",subject:{type:"badge"},disable:["connector","note"]});Et(xe,{className:"callout circle",subject:{type:"circle"},note:{lineType:"horizontal"},connector:{type:"elbow"}});Et(xe,{className:"callout rect",subject:{type:"rect"},note:{lineType:"horizontal"},connector:{type:"elbow"}});var qf=function(t){Dr(n,t);function n(){return on(this,n),Pr(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return an(n,[{key:"mapY",value:function(r){Mt(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"mapY",this).call(this,r);var i=this.annotation;(i.subject.x1||i.subject.x2)&&i.data&&r.y&&(i.y=r.y(i.data)),(i.subject.x1||i.subject.x2)&&!i.x&&(i.x=i.subject.x1||i.subject.x2)}},{key:"mapX",value:function(r){Mt(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"mapX",this).call(this,r);var i=this.annotation;(i.subject.y1||i.subject.y2)&&i.data&&r.x&&(i.x=r.x(i.data)),(i.subject.y1||i.subject.y2)&&!i.y&&(i.y=i.subject.y1||i.subject.y2)}}]),n}(we);Et(qf,{className:"callout xythreshold",subject:{type:"threshold"}});var mt=function(n,e,r,i,o){var a=n.selectAll(r+"."+(o||i)).data(e);return a.enter().append(r).merge(a).attr("class",i),a.exit().remove(),n},Lf=function(n,e,r){var i=r.component,o=r.name;i&&i.on("mouseover.annotations",function(){n.call(o+"over",i,e)}).on("mouseout.annotations",function(){return n.call(o+"out",i,e)}).on("click.annotations",function(){return n.call(o+"click",i,e)})},bi=function(n,e,r){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1.2;n.each(function(){for(var o=At(this),a=o.text().split(r||/[ \t\r\n]+/).reverse().filter(function(l){return l!==""}),s=void 0,c=[],u=o.text(null).append("tspan").attr("x",0).attr("dy",.8+"em");s=a.pop();)c.push(s),u.text(c.join(" ")),u.node().getComputedTextLength()>e&&c.length>1&&(c.pop(),u.text(c.join(" ")),c=[s],u=o.append("tspan").attr("x",0).attr("dy",i+"em").text(s))})},Mi=function(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:":not(.handle)";return n?n.selectAll(e).nodes().reduce(function(r,i){var o=i.getBBox();r.x=Math.min(r.x,o.x),r.y=Math.min(r.y,o.y),r.width=Math.max(r.width,o.width);var a=i&&i.attributes&&i.attributes.y;return r.height=Math.max(r.height,(a&&parseFloat(a.value)||0)+o.height),r},{x:0,y:0,width:0,height:0}):{x:0,y:0,width:0,height:0}};function ia(){var t=[],n=void 0,e=void 0,r=[],i={},o={},a=!1,s=void 0,c=we,u=void 0,l=void 0,f=$r("subjectover","subjectout","subjectclick","connectorover","connectorout","connectorclick","noteover","noteout","noteclick","dragend","dragstart"),h=void 0,d=function(m){h=m,a||m.selectAll("circle.handle").remove();var y=t.map(function(g){return g.type||(g.type=c),g.disable||(g.disable=r),new vf(g)});n=n||new xf({annotations:y,accessors:i,accessorsInverse:o,ids:s});var w=m.selectAll("g").data([n]);w.enter().append("g").attr("class","annotations");var b=m.select("g.annotations");mt(b,n.annotations,"g","annotation");var x=b.selectAll("g.annotation");x.each(function(g){var _=At(this);_.attr("class","annotation"),mt(_,[g],"g","annotation-connector"),mt(_,[g],"g","annotation-subject"),mt(_,[g],"g","annotation-note"),mt(_.select("g.annotation-note"),[g],"g","annotation-note-content"),g.type=g.type.toString()==="[object Object]"?g.type:new g.type({a:_,annotation:g,textWrap:u,notePadding:l,editMode:a,dispatcher:f,accessors:i}),g.type.draw(),g.type.drawText&&g.type.drawText()})};return d.json=function(){return console.log("Annotations JSON was copied to your clipboard. Please note the annotation type is not JSON compatible. It appears in the objects array in the console, but not in the copied JSON.",n.json),window.copy(JSON.stringify(n.json.map(function(p){return delete p.type,p}))),d},d.update=function(){return t&&n&&(t=n.annotations.map(function(p){return p.type.draw(),p})),d},d.updateText=function(){return n&&(n.updateText(u),t=n.annotations),d},d.updatedAccessors=function(){return n.setPositionWithAccessors(),t=n.annotations,d},d.disable=function(p){return arguments.length?(r=p,n&&(n.updateDisable(r),t=n.annotations),d):r},d.textWrap=function(p){return arguments.length?(u=p,n&&(n.updateTextWrap(u),t=n.annotations),d):u},d.notePadding=function(p){return arguments.length?(l=p,n&&(n.updateNotePadding(l),t=n.annotations),d):l},d.type=function(p,m){return arguments.length?(c=p,n&&(n.annotations.map(function(y){y.type.note&&y.type.note.selectAll("*:not(.annotation-note-content)").remove(),y.type.noteContent&&y.type.noteContent.selectAll("*").remove(),y.type.subject&&y.type.subject.selectAll("*").remove(),y.type.connector&&y.type.connector.selectAll("*").remove(),y.type.typeSettings={},y.type=c,y.subject=m&&m.subject||y.subject,y.connector=m&&m.connector||y.connector,y.note=m&&m.note||y.note}),t=n.annotations),d):c},d.annotations=function(p){if(!arguments.length)return n&&n.annotations||t;if(t=p,n&&n.annotations){var m=t.some(function(y){return!y.type||y.type.toString()!=="[object Object]"});m?(n=null,d(h)):n.annotations=t}return d},d.context=function(p){return arguments.length?(e=p,d):e},d.accessors=function(p){return arguments.length?(i=p,d):i},d.accessorsInverse=function(p){return arguments.length?(o=p,d):o},d.ids=function(p){return arguments.length?(s=p,d):s},d.editMode=function(p){return arguments.length?(a=p,h&&h.selectAll("g.annotation").classed("editable",a),n&&(n.editMode(a),t=n.annotations),d):a},d.collection=function(p){return arguments.length?(n=p,d):n},d.on=function(){var p=f.on.apply(f,arguments);return p===f?d:p},d}const Oe=new Date,Re=new Date;function z(t,n,e,r){function i(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(t(o=new Date(+o)),o),i.ceil=o=>(t(o=new Date(o-1)),n(o,1),t(o),o),i.round=o=>{const a=i(o),s=i.ceil(o);return o-a<s-o?a:s},i.offset=(o,a)=>(n(o=new Date(+o),a==null?1:Math.floor(a)),o),i.range=(o,a,s)=>{const c=[];if(o=i.ceil(o),s=s==null?1:Math.floor(s),!(o<a)||!(s>0))return c;let u;do c.push(u=new Date(+o)),n(o,s),t(o);while(u<o&&o<a);return c},i.filter=o=>z(a=>{if(a>=a)for(;t(a),!o(a);)a.setTime(a-1)},(a,s)=>{if(a>=a)if(s<0)for(;++s<=0;)for(;n(a,-1),!o(a););else for(;--s>=0;)for(;n(a,1),!o(a););}),e&&(i.count=(o,a)=>(Oe.setTime(+o),Re.setTime(+a),t(Oe),t(Re),Math.floor(e(Oe,Re))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?a=>r(a)%o===0:a=>i.count(0,a)%o===0):i)),i}const ue=z(()=>{},(t,n)=>{t.setTime(+t+n)},(t,n)=>n-t);ue.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?z(n=>{n.setTime(Math.floor(n/t)*t)},(n,e)=>{n.setTime(+n+e*t)},(n,e)=>(e-n)/t):ue);ue.range;const $t=1e3,ut=$t*60,St=ut*60,Tt=St*24,Or=Tt*7,ki=Tt*30,Fe=Tt*365,Wt=z(t=>{t.setTime(t-t.getMilliseconds())},(t,n)=>{t.setTime(+t+n*$t)},(t,n)=>(n-t)/$t,t=>t.getUTCSeconds());Wt.range;const Rr=z(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*$t)},(t,n)=>{t.setTime(+t+n*ut)},(t,n)=>(n-t)/ut,t=>t.getMinutes());Rr.range;const jf=z(t=>{t.setUTCSeconds(0,0)},(t,n)=>{t.setTime(+t+n*ut)},(t,n)=>(n-t)/ut,t=>t.getUTCMinutes());jf.range;const Fr=z(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*$t-t.getMinutes()*ut)},(t,n)=>{t.setTime(+t+n*St)},(t,n)=>(n-t)/St,t=>t.getHours());Fr.range;const Hf=z(t=>{t.setUTCMinutes(0,0,0)},(t,n)=>{t.setTime(+t+n*St)},(t,n)=>(n-t)/St,t=>t.getUTCHours());Hf.range;const Nn=z(t=>t.setHours(0,0,0,0),(t,n)=>t.setDate(t.getDate()+n),(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*ut)/Tt,t=>t.getDate()-1);Nn.range;const Ur=z(t=>{t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n)},(t,n)=>(n-t)/Tt,t=>t.getUTCDate()-1);Ur.range;const Yf=z(t=>{t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n)},(t,n)=>(n-t)/Tt,t=>Math.floor(t/Tt));Yf.range;function Lt(t){return z(n=>{n.setDate(n.getDate()-(n.getDay()+7-t)%7),n.setHours(0,0,0,0)},(n,e)=>{n.setDate(n.getDate()+e*7)},(n,e)=>(e-n-(e.getTimezoneOffset()-n.getTimezoneOffset())*ut)/Or)}const be=Lt(0),ce=Lt(1),zf=Lt(2),Wf=Lt(3),tn=Lt(4),Bf=Lt(5),Vf=Lt(6);be.range;ce.range;zf.range;Wf.range;tn.range;Bf.range;Vf.range;function jt(t){return z(n=>{n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-t)%7),n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCDate(n.getUTCDate()+e*7)},(n,e)=>(e-n)/Or)}const oa=jt(0),le=jt(1),Xf=jt(2),Zf=jt(3),nn=jt(4),Gf=jt(5),Jf=jt(6);oa.range;le.range;Xf.range;Zf.range;nn.range;Gf.range;Jf.range;const Ir=z(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,n)=>{t.setMonth(t.getMonth()+n)},(t,n)=>n.getMonth()-t.getMonth()+(n.getFullYear()-t.getFullYear())*12,t=>t.getMonth());Ir.range;const Qf=z(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCMonth(t.getUTCMonth()+n)},(t,n)=>n.getUTCMonth()-t.getUTCMonth()+(n.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());Qf.range;const ct=z(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n)},(t,n)=>n.getFullYear()-t.getFullYear(),t=>t.getFullYear());ct.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:z(n=>{n.setFullYear(Math.floor(n.getFullYear()/t)*t),n.setMonth(0,1),n.setHours(0,0,0,0)},(n,e)=>{n.setFullYear(n.getFullYear()+e*t)});ct.range;const Ut=z(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n)},(t,n)=>n.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Ut.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:z(n=>{n.setUTCFullYear(Math.floor(n.getUTCFullYear()/t)*t),n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCFullYear(n.getUTCFullYear()+e*t)});Ut.range;function Kf(t,n,e,r,i,o){const a=[[Wt,1,$t],[Wt,5,5*$t],[Wt,15,15*$t],[Wt,30,30*$t],[o,1,ut],[o,5,5*ut],[o,15,15*ut],[o,30,30*ut],[i,1,St],[i,3,3*St],[i,6,6*St],[i,12,12*St],[r,1,Tt],[r,2,2*Tt],[e,1,Or],[n,1,ki],[n,3,3*ki],[t,1,Fe]];function s(u,l,f){const h=l<u;h&&([u,l]=[l,u]);const d=f&&typeof f.range=="function"?f:c(u,l,f),p=d?d.range(u,+l+1):[];return h?p.reverse():p}function c(u,l,f){const h=Math.abs(l-u)/f,d=xr(([,,y])=>y).right(a,h);if(d===a.length)return t.every(ze(u/Fe,l/Fe,f));if(d===0)return ue.every(Math.max(ze(u,l,f),1));const[p,m]=a[h/a[d-1][2]<a[d][2]/h?d-1:d];return p.every(m)}return[s,c]}const[th,nh]=Kf(ct,Ir,be,Nn,Fr,Rr);function Ue(t){if(0<=t.y&&t.y<100){var n=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return n.setFullYear(t.y),n}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Ie(t){if(0<=t.y&&t.y<100){var n=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return n.setUTCFullYear(t.y),n}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function fn(t,n,e){return{y:t,m:n,d:e,H:0,M:0,S:0,L:0}}function eh(t){var n=t.dateTime,e=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,s=t.months,c=t.shortMonths,u=hn(i),l=dn(i),f=hn(o),h=dn(o),d=hn(a),p=dn(a),m=hn(s),y=dn(s),w=hn(c),b=dn(c),x={a:q,A:Y,b:H,B:Ct,c:null,d:Ai,e:Ai,f:$h,g:Rh,G:Uh,H:bh,I:Mh,j:kh,L:aa,m:Sh,M:Th,p:et,q:ft,Q:Pi,s:Oi,S:Nh,u:Ch,U:Ah,V:Eh,w:Dh,W:Ph,x:null,X:null,y:Oh,Y:Fh,Z:Ih,"%":Di},g={a:rt,A:V,b:it,B:sn,c:null,d:Ei,e:Ei,f:Hh,g:Qh,G:td,H:qh,I:Lh,j:jh,L:ua,m:Yh,M:zh,p:un,q:cn,Q:Pi,s:Oi,S:Wh,u:Bh,U:Vh,V:Xh,w:Zh,W:Gh,x:null,X:null,y:Jh,Y:Kh,Z:nd,"%":Di},_={a:E,A:T,b:$,B:N,c:I,d:Ni,e:Ni,f:_h,g:Ti,G:Si,H:Ci,I:Ci,j:ph,L:mh,m:dh,M:gh,p:C,q:hh,Q:xh,s:wh,S:yh,u:sh,U:uh,V:ch,w:ah,W:lh,x:O,X:R,y:Ti,Y:Si,Z:fh,"%":vh};x.x=v(e,x),x.X=v(r,x),x.c=v(n,x),g.x=v(e,g),g.X=v(r,g),g.c=v(n,g);function v(S,P){return function(F){var M=[],X=-1,L=0,K=S.length,tt,Dt,Xr;for(F instanceof Date||(F=new Date(+F));++X<K;)S.charCodeAt(X)===37&&(M.push(S.slice(L,X)),(Dt=$i[tt=S.charAt(++X)])!=null?tt=S.charAt(++X):Dt=tt==="e"?" ":"0",(Xr=P[tt])&&(tt=Xr(F,Dt)),M.push(tt),L=X+1);return M.push(S.slice(L,X)),M.join("")}}function k(S,P){return function(F){var M=fn(1900,void 0,1),X=A(M,S,F+="",0),L,K;if(X!=F.length)return null;if("Q"in M)return new Date(M.Q);if("s"in M)return new Date(M.s*1e3+("L"in M?M.L:0));if(P&&!("Z"in M)&&(M.Z=0),"p"in M&&(M.H=M.H%12+M.p*12),M.m===void 0&&(M.m="q"in M?M.q:0),"V"in M){if(M.V<1||M.V>53)return null;"w"in M||(M.w=1),"Z"in M?(L=Ie(fn(M.y,0,1)),K=L.getUTCDay(),L=K>4||K===0?le.ceil(L):le(L),L=Ur.offset(L,(M.V-1)*7),M.y=L.getUTCFullYear(),M.m=L.getUTCMonth(),M.d=L.getUTCDate()+(M.w+6)%7):(L=Ue(fn(M.y,0,1)),K=L.getDay(),L=K>4||K===0?ce.ceil(L):ce(L),L=Nn.offset(L,(M.V-1)*7),M.y=L.getFullYear(),M.m=L.getMonth(),M.d=L.getDate()+(M.w+6)%7)}else("W"in M||"U"in M)&&("w"in M||(M.w="u"in M?M.u%7:"W"in M?1:0),K="Z"in M?Ie(fn(M.y,0,1)).getUTCDay():Ue(fn(M.y,0,1)).getDay(),M.m=0,M.d="W"in M?(M.w+6)%7+M.W*7-(K+5)%7:M.w+M.U*7-(K+6)%7);return"Z"in M?(M.H+=M.Z/100|0,M.M+=M.Z%100,Ie(M)):Ue(M)}}function A(S,P,F,M){for(var X=0,L=P.length,K=F.length,tt,Dt;X<L;){if(M>=K)return-1;if(tt=P.charCodeAt(X++),tt===37){if(tt=P.charAt(X++),Dt=_[tt in $i?P.charAt(X++):tt],!Dt||(M=Dt(S,F,M))<0)return-1}else if(tt!=F.charCodeAt(M++))return-1}return M}function C(S,P,F){var M=u.exec(P.slice(F));return M?(S.p=l.get(M[0].toLowerCase()),F+M[0].length):-1}function E(S,P,F){var M=d.exec(P.slice(F));return M?(S.w=p.get(M[0].toLowerCase()),F+M[0].length):-1}function T(S,P,F){var M=f.exec(P.slice(F));return M?(S.w=h.get(M[0].toLowerCase()),F+M[0].length):-1}function $(S,P,F){var M=w.exec(P.slice(F));return M?(S.m=b.get(M[0].toLowerCase()),F+M[0].length):-1}function N(S,P,F){var M=m.exec(P.slice(F));return M?(S.m=y.get(M[0].toLowerCase()),F+M[0].length):-1}function I(S,P,F){return A(S,n,P,F)}function O(S,P,F){return A(S,e,P,F)}function R(S,P,F){return A(S,r,P,F)}function q(S){return a[S.getDay()]}function Y(S){return o[S.getDay()]}function H(S){return c[S.getMonth()]}function Ct(S){return s[S.getMonth()]}function et(S){return i[+(S.getHours()>=12)]}function ft(S){return 1+~~(S.getMonth()/3)}function rt(S){return a[S.getUTCDay()]}function V(S){return o[S.getUTCDay()]}function it(S){return c[S.getUTCMonth()]}function sn(S){return s[S.getUTCMonth()]}function un(S){return i[+(S.getUTCHours()>=12)]}function cn(S){return 1+~~(S.getUTCMonth()/3)}return{format:function(S){var P=v(S+="",x);return P.toString=function(){return S},P},parse:function(S){var P=k(S+="",!1);return P.toString=function(){return S},P},utcFormat:function(S){var P=v(S+="",g);return P.toString=function(){return S},P},utcParse:function(S){var P=k(S+="",!0);return P.toString=function(){return S},P}}}var $i={"-":"",_:" ",0:"0"},W=/^\s*\d+/,rh=/^%/,ih=/[\\^$*+?|[\]().{}]/g;function U(t,n,e){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<e?new Array(e-o+1).join(n)+i:i)}function oh(t){return t.replace(ih,"\\$&")}function hn(t){return new RegExp("^(?:"+t.map(oh).join("|")+")","i")}function dn(t){return new Map(t.map((n,e)=>[n.toLowerCase(),e]))}function ah(t,n,e){var r=W.exec(n.slice(e,e+1));return r?(t.w=+r[0],e+r[0].length):-1}function sh(t,n,e){var r=W.exec(n.slice(e,e+1));return r?(t.u=+r[0],e+r[0].length):-1}function uh(t,n,e){var r=W.exec(n.slice(e,e+2));return r?(t.U=+r[0],e+r[0].length):-1}function ch(t,n,e){var r=W.exec(n.slice(e,e+2));return r?(t.V=+r[0],e+r[0].length):-1}function lh(t,n,e){var r=W.exec(n.slice(e,e+2));return r?(t.W=+r[0],e+r[0].length):-1}function Si(t,n,e){var r=W.exec(n.slice(e,e+4));return r?(t.y=+r[0],e+r[0].length):-1}function Ti(t,n,e){var r=W.exec(n.slice(e,e+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),e+r[0].length):-1}function fh(t,n,e){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(n.slice(e,e+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),e+r[0].length):-1}function hh(t,n,e){var r=W.exec(n.slice(e,e+1));return r?(t.q=r[0]*3-3,e+r[0].length):-1}function dh(t,n,e){var r=W.exec(n.slice(e,e+2));return r?(t.m=r[0]-1,e+r[0].length):-1}function Ni(t,n,e){var r=W.exec(n.slice(e,e+2));return r?(t.d=+r[0],e+r[0].length):-1}function ph(t,n,e){var r=W.exec(n.slice(e,e+3));return r?(t.m=0,t.d=+r[0],e+r[0].length):-1}function Ci(t,n,e){var r=W.exec(n.slice(e,e+2));return r?(t.H=+r[0],e+r[0].length):-1}function gh(t,n,e){var r=W.exec(n.slice(e,e+2));return r?(t.M=+r[0],e+r[0].length):-1}function yh(t,n,e){var r=W.exec(n.slice(e,e+2));return r?(t.S=+r[0],e+r[0].length):-1}function mh(t,n,e){var r=W.exec(n.slice(e,e+3));return r?(t.L=+r[0],e+r[0].length):-1}function _h(t,n,e){var r=W.exec(n.slice(e,e+6));return r?(t.L=Math.floor(r[0]/1e3),e+r[0].length):-1}function vh(t,n,e){var r=rh.exec(n.slice(e,e+1));return r?e+r[0].length:-1}function xh(t,n,e){var r=W.exec(n.slice(e));return r?(t.Q=+r[0],e+r[0].length):-1}function wh(t,n,e){var r=W.exec(n.slice(e));return r?(t.s=+r[0],e+r[0].length):-1}function Ai(t,n){return U(t.getDate(),n,2)}function bh(t,n){return U(t.getHours(),n,2)}function Mh(t,n){return U(t.getHours()%12||12,n,2)}function kh(t,n){return U(1+Nn.count(ct(t),t),n,3)}function aa(t,n){return U(t.getMilliseconds(),n,3)}function $h(t,n){return aa(t,n)+"000"}function Sh(t,n){return U(t.getMonth()+1,n,2)}function Th(t,n){return U(t.getMinutes(),n,2)}function Nh(t,n){return U(t.getSeconds(),n,2)}function Ch(t){var n=t.getDay();return n===0?7:n}function Ah(t,n){return U(be.count(ct(t)-1,t),n,2)}function sa(t){var n=t.getDay();return n>=4||n===0?tn(t):tn.ceil(t)}function Eh(t,n){return t=sa(t),U(tn.count(ct(t),t)+(ct(t).getDay()===4),n,2)}function Dh(t){return t.getDay()}function Ph(t,n){return U(ce.count(ct(t)-1,t),n,2)}function Oh(t,n){return U(t.getFullYear()%100,n,2)}function Rh(t,n){return t=sa(t),U(t.getFullYear()%100,n,2)}function Fh(t,n){return U(t.getFullYear()%1e4,n,4)}function Uh(t,n){var e=t.getDay();return t=e>=4||e===0?tn(t):tn.ceil(t),U(t.getFullYear()%1e4,n,4)}function Ih(t){var n=t.getTimezoneOffset();return(n>0?"-":(n*=-1,"+"))+U(n/60|0,"0",2)+U(n%60,"0",2)}function Ei(t,n){return U(t.getUTCDate(),n,2)}function qh(t,n){return U(t.getUTCHours(),n,2)}function Lh(t,n){return U(t.getUTCHours()%12||12,n,2)}function jh(t,n){return U(1+Ur.count(Ut(t),t),n,3)}function ua(t,n){return U(t.getUTCMilliseconds(),n,3)}function Hh(t,n){return ua(t,n)+"000"}function Yh(t,n){return U(t.getUTCMonth()+1,n,2)}function zh(t,n){return U(t.getUTCMinutes(),n,2)}function Wh(t,n){return U(t.getUTCSeconds(),n,2)}function Bh(t){var n=t.getUTCDay();return n===0?7:n}function Vh(t,n){return U(oa.count(Ut(t)-1,t),n,2)}function ca(t){var n=t.getUTCDay();return n>=4||n===0?nn(t):nn.ceil(t)}function Xh(t,n){return t=ca(t),U(nn.count(Ut(t),t)+(Ut(t).getUTCDay()===4),n,2)}function Zh(t){return t.getUTCDay()}function Gh(t,n){return U(le.count(Ut(t)-1,t),n,2)}function Jh(t,n){return U(t.getUTCFullYear()%100,n,2)}function Qh(t,n){return t=ca(t),U(t.getUTCFullYear()%100,n,2)}function Kh(t,n){return U(t.getUTCFullYear()%1e4,n,4)}function td(t,n){var e=t.getUTCDay();return t=e>=4||e===0?nn(t):nn.ceil(t),U(t.getUTCFullYear()%1e4,n,4)}function nd(){return"+0000"}function Di(){return"%"}function Pi(t){return+t}function Oi(t){return Math.floor(+t/1e3)}var Ht,qr,la;ed({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function ed(t){return Ht=eh(t),qr=Ht.format,la=Ht.parse,Ht.utcFormat,Ht.utcParse,Ht}function rd(t,n){try{if(!t||typeof t!="object")throw new Error("Invalid regions configuration");if(!n||typeof n!="string")throw new Error("Invalid department name");for(const[e,r]of Object.entries(t))if(Array.isArray(r)&&r.includes(n))return e;return console.warn(`No region found for department: ${n}`),null}catch(e){return console.error("Error finding region:",e),null}}function id(t,n=1){try{if(typeof t!="number"||isNaN(t))throw new Error("Invalid magnitude value");if(typeof n!="number"||n<0)throw new Error("Invalid precision value");return t.toFixed(n)}catch(e){return console.error("Error formatting magnitude:",e),String(t)}}function od(t,{svg:n,projection:e,feature:r,border:i,colorScale:o,colorBy:a,radiusScale:s,radiusBy:c,thresholdBigMagnitude:u=8,thresholdMidMagnitude:l=7.8,translationX:f=0,translationY:h=0}={}){const d=j.map.width,p=d*(3/2),m=j.map.margin;n.attr("width",d).attr("height",p).attr("viewBox",`0 0 ${d} ${p}`).attr("preserveAspectRatio","xMinYMin meet").attr("class","map").style("pointer-events","all"),e.fitSize([d-m.left-m.right,p-m.top-m.bottom],r);const y=lc(e),w=n.append("g").attr("transform",`translate(${m.left}, ${m.top})`).attr("class","map-container").attr("width",d-m.left-m.right).attr("height",p-m.top-m.bottom).style("pointer-events","all");w.append("g").attr("class","map-features").attr("role","graphics-symbol").attr("aria-label","Peru regions boundaries").selectAll("path").data(r.features).join("path").attr("d",y).attr("fill","#ddd").attr("pointer-events","none"),w.append("g").attr("class","map-borders").selectAll("path").data(i.features).join("path").attr("d",y).attr("fill","#90ABA0").attr("opacity",.3).attr("stroke","gray").attr("stroke-width",.25).attr("stroke-linejoin","round").attr("pointer-events","none");const b=w.append("g").attr("class","map-chart").attr("role","graphics-symbol").attr("aria-label","Earthquake locations").selectAll("g").data(t,_=>_.eventId).join("g").attr("transform",_=>`translate(${e(_.geometry.coordinates)})`).attr("role","graphics-symbol").style("pointer-events","all").attr("aria-label",_=>`Earthquake of magnitude ${_.magnitude} at ${_.department}`);b.append("circle").attr("stroke","#E41A1C").attr("fill-opacity",.8).attr("stroke-width",_=>_.magnitude>=u?2:.3).attr("fill",_=>o(_[a])).attr("r",_=>s(_[c])).style("pointer-events","none");const x=b.append("text").attr("role","graphics-symbol").style("font-size",j.timeline.fontSizes.title).attr("x",0).attr("y",0).attr("stroke-width",.25).attr("text-anchor","middle").attr("pointer-events","none").attr("stroke",_=>_.magnitude>=u?"black":_.magnitude>=l?"#f0f0f0":null).attr("aria-hidden",_=>_.magnitude<l?"true":"false");x.append("tspan").attr("y",_=>-(s(_[c])+20)).attr("pointer-events","none").text(_=>{const v=`${id(_[c])}M, ${_.year}`;return _.magnitude>=l?v:null}),x.append("tspan").attr("x",_=>-(`${_.description}, ${_.department}`.length-10)).attr("y",_=>-(s(_[c])+5)).attr("pointer-events","none").text(_=>{const v=`${_.description}, ${_.department}`;return _.magnitude>=l?v:null});const g=ia().annotations(xc);return w.append("g").attr("class","map-annotations").attr("pointer-events","none").call(g),w.node()}function ad(t){return t}var Hn=1,qe=2,ur=3,Rn=4,Ri=1e-6;function sd(t){return"translate("+t+",0)"}function ud(t){return"translate(0,"+t+")"}function cd(t){return n=>+t(n)}function ld(t,n){return n=Math.max(0,t.bandwidth()-n*2)/2,t.round()&&(n=Math.round(n)),e=>+t(e)+n}function fd(){return!this.__axis}function fa(t,n){var e=[],r=null,i=null,o=6,a=6,s=3,c=typeof window<"u"&&window.devicePixelRatio>1?0:.5,u=t===Hn||t===Rn?-1:1,l=t===Rn||t===qe?"x":"y",f=t===Hn||t===ur?sd:ud;function h(d){var p=r??(n.ticks?n.ticks.apply(n,e):n.domain()),m=i??(n.tickFormat?n.tickFormat.apply(n,e):ad),y=Math.max(o,0)+s,w=n.range(),b=+w[0]+c,x=+w[w.length-1]+c,g=(n.bandwidth?ld:cd)(n.copy(),c),_=d.selection?d.selection():d,v=_.selectAll(".domain").data([null]),k=_.selectAll(".tick").data(p,n).order(),A=k.exit(),C=k.enter().append("g").attr("class","tick"),E=k.select("line"),T=k.select("text");v=v.merge(v.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),k=k.merge(C),E=E.merge(C.append("line").attr("stroke","currentColor").attr(l+"2",u*o)),T=T.merge(C.append("text").attr("fill","currentColor").attr(l,u*y).attr("dy",t===Hn?"0em":t===ur?"0.71em":"0.32em")),d!==_&&(v=v.transition(d),k=k.transition(d),E=E.transition(d),T=T.transition(d),A=A.transition(d).attr("opacity",Ri).attr("transform",function($){return isFinite($=g($))?f($+c):this.getAttribute("transform")}),C.attr("opacity",Ri).attr("transform",function($){var N=this.parentNode.__axis;return f((N&&isFinite(N=N($))?N:g($))+c)})),A.remove(),v.attr("d",t===Rn||t===qe?a?"M"+u*a+","+b+"H"+c+"V"+x+"H"+u*a:"M"+c+","+b+"V"+x:a?"M"+b+","+u*a+"V"+c+"H"+x+"V"+u*a:"M"+b+","+c+"H"+x),k.attr("opacity",1).attr("transform",function($){return f(g($)+c)}),E.attr(l+"2",u*o),T.attr(l,u*y).text(m),_.filter(fd).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===qe?"start":t===Rn?"end":"middle"),_.each(function(){this.__axis=g})}return h.scale=function(d){return arguments.length?(n=d,h):n},h.ticks=function(){return e=Array.from(arguments),h},h.tickArguments=function(d){return arguments.length?(e=d==null?[]:Array.from(d),h):e.slice()},h.tickValues=function(d){return arguments.length?(r=d==null?null:Array.from(d),h):r&&r.slice()},h.tickFormat=function(d){return arguments.length?(i=d,h):i},h.tickSize=function(d){return arguments.length?(o=a=+d,h):o},h.tickSizeInner=function(d){return arguments.length?(o=+d,h):o},h.tickSizeOuter=function(d){return arguments.length?(a=+d,h):a},h.tickPadding=function(d){return arguments.length?(s=+d,h):s},h.offset=function(d){return arguments.length?(c=+d,h):c},h}function hd(t){return fa(Hn,t)}function dd(t){return fa(ur,t)}function Me(t,n){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(n).domain(t);break}return this}function Lr(t,n,e){t.prototype=n.prototype=e,e.constructor=t}function ha(t,n){var e=Object.create(t.prototype);for(var r in n)e[r]=n[r];return e}function Cn(){}var kn=.7,fe=1/kn,Zt="\\s*([+-]?\\d+)\\s*",$n="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",vt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",pd=/^#([0-9a-f]{3,8})$/,gd=new RegExp(`^rgb\\(${Zt},${Zt},${Zt}\\)$`),yd=new RegExp(`^rgb\\(${vt},${vt},${vt}\\)$`),md=new RegExp(`^rgba\\(${Zt},${Zt},${Zt},${$n}\\)$`),_d=new RegExp(`^rgba\\(${vt},${vt},${vt},${$n}\\)$`),vd=new RegExp(`^hsl\\(${$n},${vt},${vt}\\)$`),xd=new RegExp(`^hsla\\(${$n},${vt},${vt},${$n}\\)$`),Fi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Lr(Cn,It,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Ui,formatHex:Ui,formatHex8:wd,formatHsl:bd,formatRgb:Ii,toString:Ii});function Ui(){return this.rgb().formatHex()}function wd(){return this.rgb().formatHex8()}function bd(){return da(this).formatHsl()}function Ii(){return this.rgb().formatRgb()}function It(t){var n,e;return t=(t+"").trim().toLowerCase(),(n=pd.exec(t))?(e=n[1].length,n=parseInt(n[1],16),e===6?qi(n):e===3?new Q(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):e===8?Fn(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):e===4?Fn(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=gd.exec(t))?new Q(n[1],n[2],n[3],1):(n=yd.exec(t))?new Q(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=md.exec(t))?Fn(n[1],n[2],n[3],n[4]):(n=_d.exec(t))?Fn(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=vd.exec(t))?Hi(n[1],n[2]/100,n[3]/100,1):(n=xd.exec(t))?Hi(n[1],n[2]/100,n[3]/100,n[4]):Fi.hasOwnProperty(t)?qi(Fi[t]):t==="transparent"?new Q(NaN,NaN,NaN,0):null}function qi(t){return new Q(t>>16&255,t>>8&255,t&255,1)}function Fn(t,n,e,r){return r<=0&&(t=n=e=NaN),new Q(t,n,e,r)}function Md(t){return t instanceof Cn||(t=It(t)),t?(t=t.rgb(),new Q(t.r,t.g,t.b,t.opacity)):new Q}function cr(t,n,e,r){return arguments.length===1?Md(t):new Q(t,n,e,r??1)}function Q(t,n,e,r){this.r=+t,this.g=+n,this.b=+e,this.opacity=+r}Lr(Q,cr,ha(Cn,{brighter(t){return t=t==null?fe:Math.pow(fe,t),new Q(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?kn:Math.pow(kn,t),new Q(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Q(Rt(this.r),Rt(this.g),Rt(this.b),he(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Li,formatHex:Li,formatHex8:kd,formatRgb:ji,toString:ji}));function Li(){return`#${Ot(this.r)}${Ot(this.g)}${Ot(this.b)}`}function kd(){return`#${Ot(this.r)}${Ot(this.g)}${Ot(this.b)}${Ot((isNaN(this.opacity)?1:this.opacity)*255)}`}function ji(){const t=he(this.opacity);return`${t===1?"rgb(":"rgba("}${Rt(this.r)}, ${Rt(this.g)}, ${Rt(this.b)}${t===1?")":`, ${t})`}`}function he(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Rt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Ot(t){return t=Rt(t),(t<16?"0":"")+t.toString(16)}function Hi(t,n,e,r){return r<=0?t=n=e=NaN:e<=0||e>=1?t=n=NaN:n<=0&&(t=NaN),new dt(t,n,e,r)}function da(t){if(t instanceof dt)return new dt(t.h,t.s,t.l,t.opacity);if(t instanceof Cn||(t=It(t)),!t)return new dt;if(t instanceof dt)return t;t=t.rgb();var n=t.r/255,e=t.g/255,r=t.b/255,i=Math.min(n,e,r),o=Math.max(n,e,r),a=NaN,s=o-i,c=(o+i)/2;return s?(n===o?a=(e-r)/s+(e<r)*6:e===o?a=(r-n)/s+2:a=(n-e)/s+4,s/=c<.5?o+i:2-o-i,a*=60):s=c>0&&c<1?0:a,new dt(a,s,c,t.opacity)}function $d(t,n,e,r){return arguments.length===1?da(t):new dt(t,n,e,r??1)}function dt(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}Lr(dt,$d,ha(Cn,{brighter(t){return t=t==null?fe:Math.pow(fe,t),new dt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?kn:Math.pow(kn,t),new dt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*n,i=2*e-r;return new Q(Le(t>=240?t-240:t+120,i,r),Le(t,i,r),Le(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new dt(Yi(this.h),Un(this.s),Un(this.l),he(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=he(this.opacity);return`${t===1?"hsl(":"hsla("}${Yi(this.h)}, ${Un(this.s)*100}%, ${Un(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Yi(t){return t=(t||0)%360,t<0?t+360:t}function Un(t){return Math.max(0,Math.min(1,t||0))}function Le(t,n,e){return(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)*255}const jr=t=>()=>t;function Sd(t,n){return function(e){return t+e*n}}function Td(t,n,e){return t=Math.pow(t,e),n=Math.pow(n,e)-t,e=1/e,function(r){return Math.pow(t+r*n,e)}}function Nd(t){return(t=+t)==1?pa:function(n,e){return e-n?Td(n,e,t):jr(isNaN(n)?e:n)}}function pa(t,n){var e=n-t;return e?Sd(t,e):jr(isNaN(t)?n:t)}const de=function t(n){var e=Nd(n);function r(i,o){var a=e((i=cr(i)).r,(o=cr(o)).r),s=e(i.g,o.g),c=e(i.b,o.b),u=pa(i.opacity,o.opacity);return function(l){return i.r=a(l),i.g=s(l),i.b=c(l),i.opacity=u(l),i+""}}return r.gamma=t,r}(1);function Cd(t,n){n||(n=[]);var e=t?Math.min(n.length,t.length):0,r=n.slice(),i;return function(o){for(i=0;i<e;++i)r[i]=t[i]*(1-o)+n[i]*o;return r}}function Ad(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Ed(t,n){var e=n?n.length:0,r=t?Math.min(e,t.length):0,i=new Array(r),o=new Array(e),a;for(a=0;a<r;++a)i[a]=ke(t[a],n[a]);for(;a<e;++a)o[a]=n[a];return function(s){for(a=0;a<r;++a)o[a]=i[a](s);return o}}function Dd(t,n){var e=new Date;return t=+t,n=+n,function(r){return e.setTime(t*(1-r)+n*r),e}}function ht(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}function Pd(t,n){var e={},r={},i;(t===null||typeof t!="object")&&(t={}),(n===null||typeof n!="object")&&(n={});for(i in n)i in t?e[i]=ke(t[i],n[i]):r[i]=n[i];return function(o){for(i in e)r[i]=e[i](o);return r}}var lr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,je=new RegExp(lr.source,"g");function Od(t){return function(){return t}}function Rd(t){return function(n){return t(n)+""}}function ga(t,n){var e=lr.lastIndex=je.lastIndex=0,r,i,o,a=-1,s=[],c=[];for(t=t+"",n=n+"";(r=lr.exec(t))&&(i=je.exec(n));)(o=i.index)>e&&(o=n.slice(e,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,c.push({i:a,x:ht(r,i)})),e=je.lastIndex;return e<n.length&&(o=n.slice(e),s[a]?s[a]+=o:s[++a]=o),s.length<2?c[0]?Rd(c[0].x):Od(n):(n=c.length,function(u){for(var l=0,f;l<n;++l)s[(f=c[l]).i]=f.x(u);return s.join("")})}function ke(t,n){var e=typeof n,r;return n==null||e==="boolean"?jr(n):(e==="number"?ht:e==="string"?(r=It(n))?(n=r,de):ga:n instanceof It?de:n instanceof Date?Dd:Ad(n)?Cd:Array.isArray(n)?Ed:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?Pd:ht)(t,n)}function ya(t,n){return t=+t,n=+n,function(e){return Math.round(t*(1-e)+n*e)}}var zi=180/Math.PI,fr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ma(t,n,e,r,i,o){var a,s,c;return(a=Math.sqrt(t*t+n*n))&&(t/=a,n/=a),(c=t*e+n*r)&&(e-=t*c,r-=n*c),(s=Math.sqrt(e*e+r*r))&&(e/=s,r/=s,c/=s),t*r<n*e&&(t=-t,n=-n,c=-c,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(n,t)*zi,skewX:Math.atan(c)*zi,scaleX:a,scaleY:s}}var In;function Fd(t){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return n.isIdentity?fr:ma(n.a,n.b,n.c,n.d,n.e,n.f)}function Ud(t){return t==null||(In||(In=document.createElementNS("http://www.w3.org/2000/svg","g")),In.setAttribute("transform",t),!(t=In.transform.baseVal.consolidate()))?fr:(t=t.matrix,ma(t.a,t.b,t.c,t.d,t.e,t.f))}function _a(t,n,e,r){function i(u){return u.length?u.pop()+" ":""}function o(u,l,f,h,d,p){if(u!==f||l!==h){var m=d.push("translate(",null,n,null,e);p.push({i:m-4,x:ht(u,f)},{i:m-2,x:ht(l,h)})}else(f||h)&&d.push("translate("+f+n+h+e)}function a(u,l,f,h){u!==l?(u-l>180?l+=360:l-u>180&&(u+=360),h.push({i:f.push(i(f)+"rotate(",null,r)-2,x:ht(u,l)})):l&&f.push(i(f)+"rotate("+l+r)}function s(u,l,f,h){u!==l?h.push({i:f.push(i(f)+"skewX(",null,r)-2,x:ht(u,l)}):l&&f.push(i(f)+"skewX("+l+r)}function c(u,l,f,h,d,p){if(u!==f||l!==h){var m=d.push(i(d)+"scale(",null,",",null,")");p.push({i:m-4,x:ht(u,f)},{i:m-2,x:ht(l,h)})}else(f!==1||h!==1)&&d.push(i(d)+"scale("+f+","+h+")")}return function(u,l){var f=[],h=[];return u=t(u),l=t(l),o(u.translateX,u.translateY,l.translateX,l.translateY,f,h),a(u.rotate,l.rotate,f,h),s(u.skewX,l.skewX,f,h),c(u.scaleX,u.scaleY,l.scaleX,l.scaleY,f,h),u=l=null,function(d){for(var p=-1,m=h.length,y;++p<m;)f[(y=h[p]).i]=y.x(d);return f.join("")}}}var Id=_a(Fd,"px, ","px)","deg)"),qd=_a(Ud,", ",")",")");function Ld(t,n){for(var e=new Array(n),r=0;r<n;++r)e[r]=t(r/(n-1));return e}function jd(t){return function(){return t}}function Hd(t){return+t}var Wi=[0,1];function _t(t){return t}function hr(t,n){return(n-=t=+t)?function(e){return(e-t)/n}:jd(isNaN(n)?NaN:.5)}function Yd(t,n){var e;return t>n&&(e=t,t=n,n=e),function(r){return Math.max(t,Math.min(n,r))}}function zd(t,n,e){var r=t[0],i=t[1],o=n[0],a=n[1];return i<r?(r=hr(i,r),o=e(a,o)):(r=hr(r,i),o=e(o,a)),function(s){return o(r(s))}}function Wd(t,n,e){var r=Math.min(t.length,n.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++a<r;)i[a]=hr(t[a],t[a+1]),o[a]=e(n[a],n[a+1]);return function(s){var c=xo(t,s,1,r)-1;return o[c](i[c](s))}}function Hr(t,n){return n.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function va(){var t=Wi,n=Wi,e=ke,r,i,o,a=_t,s,c,u;function l(){var h=Math.min(t.length,n.length);return a!==_t&&(a=Yd(t[0],t[h-1])),s=h>2?Wd:zd,c=u=null,f}function f(h){return h==null||isNaN(h=+h)?o:(c||(c=s(t.map(r),n,e)))(r(a(h)))}return f.invert=function(h){return a(i((u||(u=s(n,t.map(r),ht)))(h)))},f.domain=function(h){return arguments.length?(t=Array.from(h,Hd),l()):t.slice()},f.range=function(h){return arguments.length?(n=Array.from(h),l()):n.slice()},f.rangeRound=function(h){return n=Array.from(h),e=ya,l()},f.clamp=function(h){return arguments.length?(a=h?!0:_t,l()):a!==_t},f.interpolate=function(h){return arguments.length?(e=h,l()):e},f.unknown=function(h){return arguments.length?(o=h,f):o},function(h,d){return r=h,i=d,l()}}function xa(){return va()(_t,_t)}function Bd(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function pe(t,n){if((e=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var e,r=t.slice(0,e);return[r.length>1?r[0]+r.slice(2):r,+t.slice(e+1)]}function en(t){return t=pe(Math.abs(t)),t?t[1]:NaN}function Vd(t,n){return function(e,r){for(var i=e.length,o=[],a=0,s=t[0],c=0;i>0&&s>0&&(c+s+1>r&&(s=Math.max(1,r-c)),o.push(e.substring(i-=s,i+s)),!((c+=s+1)>r));)s=t[a=(a+1)%t.length];return o.reverse().join(n)}}function Xd(t){return function(n){return n.replace(/[0-9]/g,function(e){return t[+e]})}}var Zd=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ge(t){if(!(n=Zd.exec(t)))throw new Error("invalid format: "+t);var n;return new Yr({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}ge.prototype=Yr.prototype;function Yr(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Yr.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Gd(t){t:for(var n=t.length,e=1,r=-1,i;e<n;++e)switch(t[e]){case".":r=i=e;break;case"0":r===0&&(r=e),i=e;break;default:if(!+t[e])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var wa;function Jd(t,n){var e=pe(t,n);if(!e)return t+"";var r=e[0],i=e[1],o=i-(wa=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+pe(t,Math.max(0,n+o-1))[0]}function Bi(t,n){var e=pe(t,n);if(!e)return t+"";var r=e[0],i=e[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Vi={"%":(t,n)=>(t*100).toFixed(n),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Bd,e:(t,n)=>t.toExponential(n),f:(t,n)=>t.toFixed(n),g:(t,n)=>t.toPrecision(n),o:t=>Math.round(t).toString(8),p:(t,n)=>Bi(t*100,n),r:Bi,s:Jd,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Xi(t){return t}var Zi=Array.prototype.map,Gi=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Qd(t){var n=t.grouping===void 0||t.thousands===void 0?Xi:Vd(Zi.call(t.grouping,Number),t.thousands+""),e=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?Xi:Xd(Zi.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"−":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(f){f=ge(f);var h=f.fill,d=f.align,p=f.sign,m=f.symbol,y=f.zero,w=f.width,b=f.comma,x=f.precision,g=f.trim,_=f.type;_==="n"?(b=!0,_="g"):Vi[_]||(x===void 0&&(x=12),g=!0,_="g"),(y||h==="0"&&d==="=")&&(y=!0,h="0",d="=");var v=m==="$"?e:m==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",k=m==="$"?r:/[%p]/.test(_)?a:"",A=Vi[_],C=/[defgprs%]/.test(_);x=x===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x));function E(T){var $=v,N=k,I,O,R;if(_==="c")N=A(T)+N,T="";else{T=+T;var q=T<0||1/T<0;if(T=isNaN(T)?c:A(Math.abs(T),x),g&&(T=Gd(T)),q&&+T==0&&p!=="+"&&(q=!1),$=(q?p==="("?p:s:p==="-"||p==="("?"":p)+$,N=(_==="s"?Gi[8+wa/3]:"")+N+(q&&p==="("?")":""),C){for(I=-1,O=T.length;++I<O;)if(R=T.charCodeAt(I),48>R||R>57){N=(R===46?i+T.slice(I+1):T.slice(I))+N,T=T.slice(0,I);break}}}b&&!y&&(T=n(T,1/0));var Y=$.length+T.length+N.length,H=Y<w?new Array(w-Y+1).join(h):"";switch(b&&y&&(T=n(H+T,H.length?w-N.length:1/0),H=""),d){case"<":T=$+T+N+H;break;case"=":T=$+H+T+N;break;case"^":T=H.slice(0,Y=H.length>>1)+$+T+N+H.slice(Y);break;default:T=H+$+T+N;break}return o(T)}return E.toString=function(){return f+""},E}function l(f,h){var d=u((f=ge(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(en(h)/3)))*3,m=Math.pow(10,-p),y=Gi[8+p/3];return function(w){return d(m*w)+y}}return{format:u,formatPrefix:l}}var qn,Gt,ba;Kd({thousands:",",grouping:[3],currency:["$",""]});function Kd(t){return qn=Qd(t),Gt=qn.format,ba=qn.formatPrefix,qn}function tp(t){return Math.max(0,-en(Math.abs(t)))}function np(t,n){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(en(n)/3)))*3-en(Math.abs(t)))}function ep(t,n){return t=Math.abs(t),n=Math.abs(n)-t,Math.max(0,en(n)-en(t))+1}function rp(t,n,e,r){var i=ze(t,n,e),o;switch(r=ge(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(n));return r.precision==null&&!isNaN(o=np(i,a))&&(r.precision=o),ba(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=ep(i,Math.max(Math.abs(t),Math.abs(n))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=tp(i))&&(r.precision=o-(r.type==="%")*2);break}}return Gt(r)}function Ma(t){var n=t.domain;return t.ticks=function(e){var r=n();return Iu(r[0],r[r.length-1],e??10)},t.tickFormat=function(e,r){var i=n();return rp(i[0],i[i.length-1],e??10,r)},t.nice=function(e){e==null&&(e=10);var r=n(),i=0,o=r.length-1,a=r[i],s=r[o],c,u,l=10;for(s<a&&(u=a,a=s,s=u,u=i,i=o,o=u);l-- >0;){if(u=Ye(a,s,e),u===c)return r[i]=a,r[o]=s,n(r);if(u>0)a=Math.floor(a/u)*u,s=Math.ceil(s/u)*u;else if(u<0)a=Math.ceil(a*u)/u,s=Math.floor(s*u)/u;else break;c=u}return t},t}function dr(){var t=xa();return t.copy=function(){return Hr(t,dr())},Me.apply(t,arguments),Ma(t)}function ip(t,n){t=t.slice();var e=0,r=t.length-1,i=t[e],o=t[r],a;return o<i&&(a=e,e=r,r=a,a=i,i=o,o=a),t[e]=n.floor(i),t[r]=n.ceil(o),t}function Ji(t){return function(n){return n<0?-Math.pow(-n,t):Math.pow(n,t)}}function op(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function ap(t){return t<0?-t*t:t*t}function sp(t){var n=t(_t,_t),e=1;function r(){return e===1?t(_t,_t):e===.5?t(op,ap):t(Ji(e),Ji(1/e))}return n.exponent=function(i){return arguments.length?(e=+i,r()):e},Ma(n)}function ka(){var t=sp(va());return t.copy=function(){return Hr(t,ka()).exponent(t.exponent())},Me.apply(t,arguments),t}function $a(){return ka.apply(null,arguments).exponent(.5)}function zr(){var t=[.5],n=[0,1],e,r=1;function i(o){return o!=null&&o<=o?n[xo(t,o,0,r)]:e}return i.domain=function(o){return arguments.length?(t=Array.from(o),r=Math.min(t.length,n.length-1),i):t.slice()},i.range=function(o){return arguments.length?(n=Array.from(o),r=Math.min(t.length,n.length-1),i):n.slice()},i.invertExtent=function(o){var a=n.indexOf(o);return[t[a-1],t[a]]},i.unknown=function(o){return arguments.length?(e=o,i):e},i.copy=function(){return zr().domain(t).range(n).unknown(e)},Me.apply(i,arguments)}function up(t){return new Date(t)}function cp(t){return t instanceof Date?+t:+new Date(+t)}function Sa(t,n,e,r,i,o,a,s,c,u){var l=xa(),f=l.invert,h=l.domain,d=u(".%L"),p=u(":%S"),m=u("%I:%M"),y=u("%I %p"),w=u("%a %d"),b=u("%b %d"),x=u("%B"),g=u("%Y");function _(v){return(c(v)<v?d:s(v)<v?p:a(v)<v?m:o(v)<v?y:r(v)<v?i(v)<v?w:b:e(v)<v?x:g)(v)}return l.invert=function(v){return new Date(f(v))},l.domain=function(v){return arguments.length?h(Array.from(v,cp)):h().map(up)},l.ticks=function(v){var k=h();return t(k[0],k[k.length-1],v??10)},l.tickFormat=function(v,k){return k==null?_:u(k)},l.nice=function(v){var k=h();return(!v||typeof v.range!="function")&&(v=n(k[0],k[k.length-1],v??10)),v?h(ip(k,v)):l},l.copy=function(){return Hr(l,Sa(t,n,e,r,i,o,a,s,c,u))},l}function lp(){return Me.apply(Sa(th,nh,ct,Ir,be,Nn,Fr,Rr,Wt,qr).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function fp(t,{svg:n,vars:e,width:r,rowSize:i=35,firstRowOffset:o=0,leftPositionGridLine:a=100}={}){const s=j.timeline.margins,c=Gt(".2f"),u=qr("%Y");let l=t.reduce((k,A)=>k+A.departments.length*i,0);l+=s.top,n.attr("width",r).attr("height",l).attr("viewBox",`0 0 ${r} ${l}`).attr("class","timeline-chart").attr("preserveAspectRatio","xMinYMin meet").attr("role","img").style("pointer-events","all").attr("aria-label","Timeline of earthquakes in Peru");const f=n.append("g").attr("transform",`translate(${s.left}, ${s.top})`).attr("class","chart-container").attr("width",r-s.left-s.right).attr("height",l-s.top-s.bottom).style("pointer-events","all").attr("role","graphics-document").attr("aria-roledescription","Timeline visualization"),h=t.map(k=>k.earthquakes).flat(),d=[ct.floor(Lu(h,k=>k[e.cx])),ct.ceil(qu(h,k=>k[e.cx]))],p=lp().domain(d).range([a+210,r-j.timeline.margins.right-30]),m=$a().domain([7,10]).range([.1,i/2-2]),y=f.append("g").attr("class","earthquake-table").attr("transform","translate(0, 0)").style("pointer-events","all"),w=y.append("g").attr("class","axisY").attr("role","graphics-symbol").attr("pointer-events","none").attr("aria-label","Timeline headers").style("font-size",j.timeline.fontSizes.header).style("font-weight","bold").style("font-family","sans-serif").attr("fill","#444");w.append("text").text("REGIÓN").attr("role","columnheader").attr("pointer-events","none").attr("transform",`translate(0, ${o})`).attr("aria-label","Region column header"),w.append("text").text("DEPARTMENTO").attr("role","columnheader").attr("pointer-events","none").attr("transform",`translate(${a}, ${o})`).attr("aria-label","Department column header");const b=y.append("g").attr("class","timeline-plot").attr("transform",`translate(0, ${i})`).style("pointer-events","all");let x=0;for(let k=0;k<t.length;k++){const A=t[k].region,C=t[k].departments;for(let E=0;E<C.length;E++){const T=b.append("g").attr("transform",`translate(0, ${E*i+x})`).attr("role","row").attr("pointer-events","none").attr("aria-label",`${A} - ${C[E].department}`);T.append("line").attr("x1",a).attr("x2",r).attr("y1",i*.25).attr("y2",i*.25).attr("pointer-events","none").style("stroke","#eee");const $=T.append("text").attr("role","cell").style("font-size",j.timeline.fontSizes.text).style("font-family","sans-serif").style("fill","#444").attr("pointer-events","none").attr("transform","translate(0, 0)");E===0&&$.text(A).style("font-weight","bold").attr("aria-label",`Region: ${A}`),T.append("text").attr("role","cell").attr("transform",`translate(${a}, 0)`).text(`${C[E].department} (${C[E].earthquakes.length})`).style("font-size",j.timeline.fontSizes.text).style("font-family","sans-serif").attr("pointer-events","none").attr("aria-label",`Department: ${C[E].department}, ${C[E].earthquakes.length} earthquakes`),T.append("g").attr("class","earthquake-circles").attr("role","graphics-symbol").style("pointer-events","all").attr("aria-label",`Earthquakes in ${C[E].department}`).selectAll("circle").data(C[E].earthquakes).join("circle").attr("cx",I=>c(p(I[e.cx]))).attr("cy",`-${i/2-8}`).attr("r",I=>c(m(I[e.r]))).attr("fill",I=>I.type==="Historical"?"#FF9A9F":"#FF3900").attr("stroke","#E41A1C").attr("stroke-width",1.5).attr("opacity",.7).attr("role","graphics-symbol").style("pointer-events","none").attr("aria-label",I=>`${I.type} earthquake, magnitude ${I[e.r]}, year ${u(I[e.cx])}`)}x+=C.length*i}const g=hd(p).ticks(ct.every(20)).tickSize(6).tickPadding(8).tickFormat(u),_=y.append("g").attr("class","xAxis").attr("role","graphics-symbol").attr("pointer-events","none").attr("aria-label","Timeline years").attr("transform","translate(0, 10)").style("font-family","sans-serif");_.call(g).selectAll(".tick text").style("text-anchor","middle").attr("pointer-events","none").attr("dy","-0.5em"),_.select(".domain").attr("stroke","#000").attr("stroke-width",1).attr("pointer-events","none"),_.selectAll(".tick line").attr("stroke","#000").attr("stroke-width",1).attr("pointer-events","none"),_.selectAll("text").style("font-size",j.timeline.fontSizes.axis).attr("aria-hidden","false").attr("pointer-events","none");const v=ia().annotations(wc);return f.append("g").attr("class","timeline-annotations").attr("pointer-events","none").call(v),f.node()}function hp(t,{title:n,tickSize:e=6,width:r=320,height:i=44+e,marginTop:o=18,marginRight:a=0,marginBottom:s=16+e,marginLeft:c=0,ticks:u=r/64,tickFormat:l,tickValues:f}={}){const h=ku("svg").attr("width",r).attr("height",i).attr("viewBox",[0,0,r,i]).attr("role","img").attr("aria-label",`Legend for ${n}`).style("overflow","visible").style("display","block");h.append("title").text(`${n} Legend`);const d=h.append("g").attr("role","list").attr("aria-label",`${n} scale values`),p=y=>y.selectAll(".tick line").attr("y1",o+s-i);let m;if(t.type==="threshold")m=dr().domain([0,t.domain().length]-1).range([c,r-a]);else if(t.interpolate){const y=Math.min(t.domain().length,t.range().length);m=t.copy().rangeRound(Ld(ke(c,r-a),y))}else t.interpolator?m=Object.assign(t.copy().interpolator(ya(c,r-a)),{range(){return[c,r-a]}}):m=dr().domain([-1,t.range().length-1]).rangeRound([c,r-a]);return d.append("g").selectAll("rect").data(t.range()).join("rect").attr("x",(y,w)=>m(w-1)).attr("y",o).attr("width",(y,w)=>m(w)-m(w-1)).attr("height",i-o-s).attr("fill",y=>y).attr("role","presentation"),d.append("g").attr("transform",`translate(0,${i-s})`).call(dd(m).tickValues(f?[...Array(t.domain().length).keys()]:null).tickFormat((y,w)=>l?l(t.domain()[w]):t.domain()[w]).tickSize(e)).call(p).call(y=>y.select(".domain").remove()).call(y=>y.append("text").attr("x",c).attr("y",o+s-i-6).attr("fill","currentColor").attr("text-anchor","start").attr("font-weight","bold").attr("class","title-legend").attr("role","heading").attr("aria-level","2").text(n)),h.node()}function dp({svg:t=null,domain:n=[0,100],range:e=[0,80],title:r}={}){const i=s=>`${s}${s===n[n.length-1]?"+":""}`,o=zr().domain(n).range(e),a=hp(o,{title:r,tickSize:6,width:200,tickValues:n,tickFormat:i});return t.append("g").attr("class","bar-legend").attr("role","complementary").attr("aria-label",`${r} scale`).attr("transform","translate(5, 0)").append(()=>a),t.node()}function pp(t,{svg:n=null,domain:e=[0,100],range:r=[0,80],width:i=r[1]*2,height:o=r[1]*2,suffix:a="",textPadding:s=5,fontSize:c=15,scale:u,title:l,thresholdMagnitude:f=8}={}){n.selectAll("g").remove();const h=n.append("g").attr("class","circle-legend").attr("role","complementary").attr("aria-label",`${l} scale`).attr("transform","translate(0, 0)");h.append("text").attr("class","title-legend").text(l).attr("transform","translate(-30, -220)").attr("text-anchor","start").attr("role","heading").attr("aria-level","2");const d=h.append("g").attr("class","circle-legend-wrap").attr("role","list").selectAll("g").data(t).join("g").attr("role","listitem").attr("aria-label",p=>`Magnitude ${p}${a}`);return d.append("circle").attr("r",p=>u(p)).attr("cx",i/2).attr("cy",p=>o-u(p)).style("fill","none").style("stroke","#E41A1C").attr("stroke-width",p=>p>=f?1.5:.7).style("opacity",.8).attr("role","presentation"),d.append("text").attr("x",i/2+s).attr("y",p=>o-2*u(p)-3).attr("shape-rendering","crispEdges").style("text-anchor","end").style("fill","black").style("font-size",c).text(p=>p>6?p+a:"").attr("role","presentation"),h.node()}function gp(){return zr().domain(j.map.depthSegmentation.map(t=>t.depth)).range(j.map.depthSegmentation.map(t=>t.color))}function yp({maxMagnitude:t=10,maxRadius:n=j.map.maxRadius}={}){const e=Math.pow(10,1.5*t+4.8);return $a().domain([0,e]).range([0,n])}function Qi(t,n={}){const e=yp(n),r=Math.pow(10,1.5*t+4.8);return e(r)}const mp=la("%a %b %d %Y %H:%M:%S");function _p(t){return t.map(n=>{const e=n.geometry.replace(/"{2,}/g,'"').replace(/;/g,","),r=JSON.parse(e);return{eventId:+n.eventId,utcDate:n.utcDate,geometry:r,depth:+n.depth,magnitude:+n.magnitude,year:+n.year,type:n.type,id:n.id,distanceFromCoast:+n.distanceFromCoast,department:n.department,description:n.description}})}function vp(t,n=7){const e=t.filter(r=>r.magnitude>=n).map(r=>({eventId:r.eventId,year:r.year,magnitude:r.magnitude,department:r.department==="Lima"||r.department==="Callao"?"Lima y Callao":r.department,date:mp(r.utcDate)||new Date(r.year,0),type:r.type,region:rd(j.regions,r.department)}));return Array.from(Pu(e,r=>r.region,r=>r.department)).map(r=>({region:r[0],departments:Array.from(r[1]).map(i=>({department:i[0],earthquakes:i[1],count:i[1].length})).sort((i,o)=>o.count-i.count),earthquakes:Array.from(r[1]).map(i=>i[1]).flat()}))}function xp(t,n=j.map.magnitudeThreshold){return t.filter(e=>e.type==="Instrumental"&&e.magnitude>=n)}var wp={value:()=>{}};function Ta(){for(var t=0,n=arguments.length,e={},r;t<n;++t){if(!(r=arguments[t]+"")||r in e||/[\s.]/.test(r))throw new Error("illegal type: "+r);e[r]=[]}return new Yn(e)}function Yn(t){this._=t}function bp(t,n){return t.trim().split(/^|\s+/).map(function(e){var r="",i=e.indexOf(".");if(i>=0&&(r=e.slice(i+1),e=e.slice(0,i)),e&&!n.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:r}})}Yn.prototype=Ta.prototype={constructor:Yn,on:function(t,n){var e=this._,r=bp(t+"",e),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(t=r[o]).type)&&(i=Mp(e[i],t.name)))return i;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++o<a;)if(i=(t=r[o]).type)e[i]=Ki(e[i],t.name,n);else if(n==null)for(i in e)e[i]=Ki(e[i],t.name,null);return this},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new Yn(t)},call:function(t,n){if((i=arguments.length-2)>0)for(var e=new Array(i),r=0,i,o;r<i;++r)e[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(n,e)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(n,e)}};function Mp(t,n){for(var e=0,r=t.length,i;e<r;++e)if((i=t[e]).name===n)return i.value}function Ki(t,n,e){for(var r=0,i=t.length;r<i;++r)if(t[r].name===n){t[r]=wp,t=t.slice(0,r).concat(t.slice(r+1));break}return e!=null&&t.push({name:n,value:e}),t}var rn=0,vn=0,pn=0,Na=1e3,ye,xn,me=0,qt=0,$e=0,Sn=typeof performance=="object"&&performance.now?performance:Date,Ca=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Wr(){return qt||(Ca(kp),qt=Sn.now()+$e)}function kp(){qt=0}function _e(){this._call=this._time=this._next=null}_e.prototype=Aa.prototype={constructor:_e,restart:function(t,n,e){if(typeof t!="function")throw new TypeError("callback is not a function");e=(e==null?Wr():+e)+(n==null?0:+n),!this._next&&xn!==this&&(xn?xn._next=this:ye=this,xn=this),this._call=t,this._time=e,pr()},stop:function(){this._call&&(this._call=null,this._time=1/0,pr())}};function Aa(t,n,e){var r=new _e;return r.restart(t,n,e),r}function $p(){Wr(),++rn;for(var t=ye,n;t;)(n=qt-t._time)>=0&&t._call.call(void 0,n),t=t._next;--rn}function to(){qt=(me=Sn.now())+$e,rn=vn=0;try{$p()}finally{rn=0,Tp(),qt=0}}function Sp(){var t=Sn.now(),n=t-me;n>Na&&($e-=n,me=t)}function Tp(){for(var t,n=ye,e,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:ye=e);xn=t,pr(r)}function pr(t){if(!rn){vn&&(vn=clearTimeout(vn));var n=t-qt;n>24?(t<1/0&&(vn=setTimeout(to,t-Sn.now()-$e)),pn&&(pn=clearInterval(pn))):(pn||(me=Sn.now(),pn=setInterval(Sp,Na)),rn=1,Ca(to))}}function no(t,n,e){var r=new _e;return n=n==null?0:+n,r.restart(i=>{r.stop(),t(i+n)},n,e),r}var Np=Ta("start","end","cancel","interrupt"),Cp=[],Ea=0,eo=1,gr=2,zn=3,ro=4,yr=5,Wn=6;function Se(t,n,e,r,i,o){var a=t.__transition;if(!a)t.__transition={};else if(e in a)return;Ap(t,e,{name:n,index:r,group:i,on:Np,tween:Cp,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Ea})}function Br(t,n){var e=pt(t,n);if(e.state>Ea)throw new Error("too late; already scheduled");return e}function wt(t,n){var e=pt(t,n);if(e.state>zn)throw new Error("too late; already running");return e}function pt(t,n){var e=t.__transition;if(!e||!(e=e[n]))throw new Error("transition not found");return e}function Ap(t,n,e){var r=t.__transition,i;r[n]=e,e.timer=Aa(o,0,e.time);function o(u){e.state=eo,e.timer.restart(a,e.delay,e.time),e.delay<=u&&a(u-e.delay)}function a(u){var l,f,h,d;if(e.state!==eo)return c();for(l in r)if(d=r[l],d.name===e.name){if(d.state===zn)return no(a);d.state===ro?(d.state=Wn,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete r[l]):+l<n&&(d.state=Wn,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete r[l])}if(no(function(){e.state===zn&&(e.state=ro,e.timer.restart(s,e.delay,e.time),s(u))}),e.state=gr,e.on.call("start",t,t.__data__,e.index,e.group),e.state===gr){for(e.state=zn,i=new Array(h=e.tween.length),l=0,f=-1;l<h;++l)(d=e.tween[l].value.call(t,t.__data__,e.index,e.group))&&(i[++f]=d);i.length=f+1}}function s(u){for(var l=u<e.duration?e.ease.call(null,u/e.duration):(e.timer.restart(c),e.state=yr,1),f=-1,h=i.length;++f<h;)i[f].call(t,l);e.state===yr&&(e.on.call("end",t,t.__data__,e.index,e.group),c())}function c(){e.state=Wn,e.timer.stop(),delete r[n];for(var u in r)return;delete t.__transition}}function Ep(t,n){var e=t.__transition,r,i,o=!0,a;if(e){n=n==null?null:n+"";for(a in e){if((r=e[a]).name!==n){o=!1;continue}i=r.state>gr&&r.state<yr,r.state=Wn,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete e[a]}o&&delete t.__transition}}function Dp(t){return this.each(function(){Ep(this,t)})}function Pp(t,n){var e,r;return function(){var i=wt(this,t),o=i.tween;if(o!==e){r=e=o;for(var a=0,s=r.length;a<s;++a)if(r[a].name===n){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function Op(t,n,e){var r,i;if(typeof e!="function")throw new Error;return function(){var o=wt(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:n,value:e},c=0,u=i.length;c<u;++c)if(i[c].name===n){i[c]=s;break}c===u&&i.push(s)}o.tween=i}}function Rp(t,n){var e=this._id;if(t+="",arguments.length<2){for(var r=pt(this.node(),e).tween,i=0,o=r.length,a;i<o;++i)if((a=r[i]).name===t)return a.value;return null}return this.each((n==null?Pp:Op)(e,t,n))}function Vr(t,n,e){var r=t._id;return t.each(function(){var i=wt(this,r);(i.value||(i.value={}))[n]=e.apply(this,arguments)}),function(i){return pt(i,r).value[n]}}function Da(t,n){var e;return(typeof n=="number"?ht:n instanceof It?de:(e=It(n))?(n=e,de):ga)(t,n)}function Fp(t){return function(){this.removeAttribute(t)}}function Up(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ip(t,n,e){var r,i=e+"",o;return function(){var a=this.getAttribute(t);return a===i?null:a===r?o:o=n(r=a,e)}}function qp(t,n,e){var r,i=e+"",o;return function(){var a=this.getAttributeNS(t.space,t.local);return a===i?null:a===r?o:o=n(r=a,e)}}function Lp(t,n,e){var r,i,o;return function(){var a,s=e(this),c;return s==null?void this.removeAttribute(t):(a=this.getAttribute(t),c=s+"",a===c?null:a===r&&c===i?o:(i=c,o=n(r=a,s)))}}function jp(t,n,e){var r,i,o;return function(){var a,s=e(this),c;return s==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),c=s+"",a===c?null:a===r&&c===i?o:(i=c,o=n(r=a,s)))}}function Hp(t,n){var e=ve(t),r=e==="transform"?qd:Da;return this.attrTween(t,typeof n=="function"?(e.local?jp:Lp)(e,r,Vr(this,"attr."+t,n)):n==null?(e.local?Up:Fp)(e):(e.local?qp:Ip)(e,r,n))}function Yp(t,n){return function(e){this.setAttribute(t,n.call(this,e))}}function zp(t,n){return function(e){this.setAttributeNS(t.space,t.local,n.call(this,e))}}function Wp(t,n){var e,r;function i(){var o=n.apply(this,arguments);return o!==r&&(e=(r=o)&&zp(t,o)),e}return i._value=n,i}function Bp(t,n){var e,r;function i(){var o=n.apply(this,arguments);return o!==r&&(e=(r=o)&&Yp(t,o)),e}return i._value=n,i}function Vp(t,n){var e="attr."+t;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;var r=ve(t);return this.tween(e,(r.local?Wp:Bp)(r,n))}function Xp(t,n){return function(){Br(this,t).delay=+n.apply(this,arguments)}}function Zp(t,n){return n=+n,function(){Br(this,t).delay=n}}function Gp(t){var n=this._id;return arguments.length?this.each((typeof t=="function"?Xp:Zp)(n,t)):pt(this.node(),n).delay}function Jp(t,n){return function(){wt(this,t).duration=+n.apply(this,arguments)}}function Qp(t,n){return n=+n,function(){wt(this,t).duration=n}}function Kp(t){var n=this._id;return arguments.length?this.each((typeof t=="function"?Jp:Qp)(n,t)):pt(this.node(),n).duration}function t0(t,n){if(typeof n!="function")throw new Error;return function(){wt(this,t).ease=n}}function n0(t){var n=this._id;return arguments.length?this.each(t0(n,t)):pt(this.node(),n).ease}function e0(t,n){return function(){var e=n.apply(this,arguments);if(typeof e!="function")throw new Error;wt(this,t).ease=e}}function r0(t){if(typeof t!="function")throw new Error;return this.each(e0(this._id,t))}function i0(t){typeof t!="function"&&(t=co(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o=n[i],a=o.length,s=r[i]=[],c,u=0;u<a;++u)(c=o[u])&&t.call(c,c.__data__,u,o)&&s.push(c);return new Nt(r,this._parents,this._name,this._id)}function o0(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,e=t._groups,r=n.length,i=e.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var c=n[s],u=e[s],l=c.length,f=a[s]=new Array(l),h,d=0;d<l;++d)(h=c[d]||u[d])&&(f[d]=h);for(;s<r;++s)a[s]=n[s];return new Nt(a,this._parents,this._name,this._id)}function a0(t){return(t+"").trim().split(/^|\s+/).every(function(n){var e=n.indexOf(".");return e>=0&&(n=n.slice(0,e)),!n||n==="start"})}function s0(t,n,e){var r,i,o=a0(n)?Br:wt;return function(){var a=o(this,t),s=a.on;s!==r&&(i=(r=s).copy()).on(n,e),a.on=i}}function u0(t,n){var e=this._id;return arguments.length<2?pt(this.node(),e).on.on(t):this.each(s0(e,t,n))}function c0(t){return function(){var n=this.parentNode;for(var e in this.__transition)if(+e!==t)return;n&&n.removeChild(this)}}function l0(){return this.on("end.remove",c0(this._id))}function f0(t){var n=this._name,e=this._id;typeof t!="function"&&(t=_r(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s=r[a],c=s.length,u=o[a]=new Array(c),l,f,h=0;h<c;++h)(l=s[h])&&(f=t.call(l,l.__data__,h,s))&&("__data__"in l&&(f.__data__=l.__data__),u[h]=f,Se(u[h],n,e,h,u,pt(l,e)));return new Nt(o,this._parents,n,e)}function h0(t){var n=this._name,e=this._id;typeof t!="function"&&(t=uo(t));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var c=r[s],u=c.length,l,f=0;f<u;++f)if(l=c[f]){for(var h=t.call(l,l.__data__,f,c),d,p=pt(l,e),m=0,y=h.length;m<y;++m)(d=h[m])&&Se(d,n,e,m,h,p);o.push(h),a.push(l)}return new Nt(o,a,n,e)}var d0=Tn.prototype.constructor;function p0(){return new d0(this._groups,this._parents)}function g0(t,n){var e,r,i;return function(){var o=Jt(this,t),a=(this.style.removeProperty(t),Jt(this,t));return o===a?null:o===e&&a===r?i:i=n(e=o,r=a)}}function Pa(t){return function(){this.style.removeProperty(t)}}function y0(t,n,e){var r,i=e+"",o;return function(){var a=Jt(this,t);return a===i?null:a===r?o:o=n(r=a,e)}}function m0(t,n,e){var r,i,o;return function(){var a=Jt(this,t),s=e(this),c=s+"";return s==null&&(c=s=(this.style.removeProperty(t),Jt(this,t))),a===c?null:a===r&&c===i?o:(i=c,o=n(r=a,s))}}function _0(t,n){var e,r,i,o="style."+n,a="end."+o,s;return function(){var c=wt(this,t),u=c.on,l=c.value[o]==null?s||(s=Pa(n)):void 0;(u!==e||i!==l)&&(r=(e=u).copy()).on(a,i=l),c.on=r}}function v0(t,n,e){var r=(t+="")=="transform"?Id:Da;return n==null?this.styleTween(t,g0(t,r)).on("end.style."+t,Pa(t)):typeof n=="function"?this.styleTween(t,m0(t,r,Vr(this,"style."+t,n))).each(_0(this._id,t)):this.styleTween(t,y0(t,r,n),e).on("end.style."+t,null)}function x0(t,n,e){return function(r){this.style.setProperty(t,n.call(this,r),e)}}function w0(t,n,e){var r,i;function o(){var a=n.apply(this,arguments);return a!==i&&(r=(i=a)&&x0(t,a,e)),r}return o._value=n,o}function b0(t,n,e){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(n==null)return this.tween(r,null);if(typeof n!="function")throw new Error;return this.tween(r,w0(t,n,e??""))}function M0(t){return function(){this.textContent=t}}function k0(t){return function(){var n=t(this);this.textContent=n??""}}function $0(t){return this.tween("text",typeof t=="function"?k0(Vr(this,"text",t)):M0(t==null?"":t+""))}function S0(t){return function(n){this.textContent=t.call(this,n)}}function T0(t){var n,e;function r(){var i=t.apply(this,arguments);return i!==e&&(n=(e=i)&&S0(i)),n}return r._value=t,r}function N0(t){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,T0(t))}function C0(){for(var t=this._name,n=this._id,e=Oa(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,c,u=0;u<s;++u)if(c=a[u]){var l=pt(c,n);Se(c,t,e,u,a,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new Nt(r,this._parents,t,e)}function A0(){var t,n,e=this,r=e._id,i=e.size();return new Promise(function(o,a){var s={value:a},c={value:function(){--i===0&&o()}};e.each(function(){var u=wt(this,r),l=u.on;l!==t&&(n=(t=l).copy(),n._.cancel.push(s),n._.interrupt.push(s),n._.end.push(c)),u.on=n}),i===0&&o()})}var E0=0;function Nt(t,n,e,r){this._groups=t,this._parents=n,this._name=e,this._id=r}function Oa(){return++E0}var bt=Tn.prototype;Nt.prototype={constructor:Nt,select:f0,selectAll:h0,selectChild:bt.selectChild,selectChildren:bt.selectChildren,filter:i0,merge:o0,selection:p0,transition:C0,call:bt.call,nodes:bt.nodes,node:bt.node,size:bt.size,empty:bt.empty,each:bt.each,on:u0,attr:Hp,attrTween:Vp,style:v0,styleTween:b0,text:$0,textTween:N0,remove:l0,tween:Rp,delay:Gp,duration:Kp,ease:n0,easeVarying:r0,end:A0,[Symbol.iterator]:bt[Symbol.iterator]};function D0(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var P0={time:null,delay:0,duration:250,ease:D0};function O0(t,n){for(var e;!(e=t.__transition)||!(e=e[n]);)if(!(t=t.parentNode))throw new Error(`transition ${n} not found`);return e}function R0(t){var n,e;t instanceof Nt?(n=t._id,t=t._name):(n=Oa(),(e=P0).time=Wr(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,c,u=0;u<s;++u)(c=a[u])&&Se(c,t,n,u,a,e||O0(c,n));return new Nt(r,this._parents,t,n)}Tn.prototype.interrupt=Dp;Tn.prototype.transition=R0;function wn(t,n,e){this.k=t,this.x=n,this.y=e}wn.prototype={constructor:wn,scale:function(t){return t===1?this:new wn(this.k*t,this.x,this.y)},translate:function(t,n){return t===0&n===0?this:new wn(this.k,this.x+this.k*t,this.y+this.k*n)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};wn.prototype;const F0=async()=>{try{const t=await so("/earthquakes/data/input/earthquakes-stats.json");return G("#total-earthquakes").text(Gt(",")(t.totalEarthquakes)),G("#modern-recorded").text(Gt(",")(t.modernInstrumentRecorded)),G("#high-magnitude-count").text(t.highMagnitudeEvents),G("#recent-high-magnitude").text(Gt(",")(t.recentHighMagnitude)),G("#most-recent-event").text(t.mostRecentEvent),G("#most-recent-year").text(t.mostRecentEvent.substring(0,4)),t}catch(t){throw console.error("Error loading earthquake statistics:",t),["#total-earthquakes","#modern-recorded","#high-magnitude-count","#recent-high-magnitude"].forEach(e=>{G(e).text("Error loading data")}),t}};function io(t,n){const e=G(`#${t}`),r=e.append("div").attr("class","loading-container");return r.append("div").attr("class","loading-spinner"),r.append("div").attr("class","loading-text").text(n),e}function oo(t,n){const e=G(`#${t}`);e.html(""),e.append("div").attr("class","error-message").text(n)}async function U0(){try{io("vis","Cargando mapa de sismos..."),io("vis-1","Cargando línea de tiempo...");const t=await F0();console.log("Earthquake statistics loaded",t);const[n,e]=await Promise.all([so("/earthquakes/data/input/peru-100k.json"),za("/earthquakes/data/output/output.csv").then(_p)]);console.log("Cantidad de sismos",e.length),console.log("Cantidad de sismos instrumentales",e.filter(d=>d.type==="Instrumental").length),console.log(`Lugar de máximo sismo: ${e.find(d=>d.magnitude===Math.max(...e.map(p=>p.magnitude))).department}, ${Math.max(...e.map(d=>d.magnitude))}(M)`);const r=e.find(d=>d.magnitude>=7.8&&d.year===2007);r&&(r.distanceFromCoast=40,r.department="Ica",r.description="Pisco");const i=li(n,n.objects.level2),o=li(n,n.objects.level2),a=gc().reflectY(!0),s=xp(e),c=gp();G("#vis").html("");const u=G("#vis").append("svg");console.log("Cantidad de sismos en map Chart",s.length),od(s,{svg:u,projection:a,feature:i,border:o,colorScale:c,colorBy:"depth",radiusScale:d=>Qi(d),radiusBy:"magnitude"}),pp(j.legend.circle.magnitudes,{svg:u.append("g").attr("transform",`translate(${j.map.margin.left+50}, ${ne.height+300})`),scale:d=>Qi(d),title:"Magnitud (M)"}),dp({svg:u.append("g").attr("transform",`translate(${j.map.margin.left+20}, ${ne.height+470})`),domain:j.map.depthSegmentation.map(d=>d.depth),range:j.map.depthSegmentation.map(d=>d.color),title:"Profundidad (Km)"});const l=vp(e),f=l.reduce((d,p)=>d+p.earthquakes.length,0);console.log("Cantidad de datos en timeline Chart",f),G("#vis-1").html("");const h=G("#vis-1").append("svg");fp(l,{svg:h,vars:{cx:"date",cy:"department",r:"magnitude"},width:j.map.width})}catch(t){console.error("Error initializing visualization:",t),oo("vis","Error al cargar el mapa de sismos. Por favor, intente nuevamente."),oo("vis-1","Error al cargar la línea de tiempo. Por favor, intente nuevamente.")}}document.addEventListener("DOMContentLoaded",U0);
